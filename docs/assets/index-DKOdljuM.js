var Ti=Object.defineProperty;var Di=(t,e,n)=>e in t?Ti(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Qt=(t,e,n)=>Di(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();const qn=!1;var Rn=Array.isArray,Oi=Array.prototype.indexOf,Gi=Array.from,Dr=Object.defineProperty,ne=Object.getOwnPropertyDescriptor,Or=Object.getOwnPropertyDescriptors,Li=Object.prototype,Fi=Array.prototype,Tn=Object.getPrototypeOf;const Xt=()=>{};function Ni(t){return t()}function vn(t){for(var e=0;e<t.length;e++)t[e]()}const mt=2,Gr=4,qe=8,Dn=16,At=32,ke=64,Fe=128,_t=256,Ne=512,at=1024,Rt=2048,qt=4096,se=8192,je=16384,Ii=32768,ze=65536,Mi=1<<17,Ui=1<<19,Lr=1<<20,Ht=Symbol("$state"),Bi=Symbol("legacy props"),Vi=Symbol("");function Fr(t){return t===this.v}function Nr(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function On(t){return!Nr(t,this.v)}function Yi(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Xi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Hi(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ki(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function qi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function ji(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function zi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Wi(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Ji(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let oe=!1,Zi=!1;function Qi(){oe=!0}const $i=1,ts=2,Ir=4,es=8,ns=16,rs=1,is=2,dt=Symbol();function Gn(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let q=null;function jn(t){q=t}function Mr(t){return Ur().get(t)}function zn(t,e){return Ur().set(t,e),e}function Tt(t,e=!1,n){q={p:q,c:null,e:null,m:!1,s:t,x:null,l:null},oe&&!e&&(q.l={s:null,u:null,r1:[],r2:pt(!1)})}function Dt(t){const e=q;if(e!==null){t!==void 0&&(e.x=t);const h=e.e;if(h!==null){var n=$,i=W;e.e=null;try{for(var l=0;l<h.length;l++){var r=h[l];Vt(r.effect),Bt(r.reaction),Nn(r.fn)}}finally{Vt(n),Bt(i)}}q=e.p,e.m=!0}return t||{}}function Ae(){return!oe||q!==null&&q.l===null}function Ur(t){return q===null&&Gn(),q.c??(q.c=new Map(ss(q)||void 0))}function ss(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}function pt(t,e){var n={f:0,v:t,reactions:null,equals:Fr,rv:0,wv:0};return n}function Ie(t){return Br(pt(t))}function Ln(t,e=!1){var i;const n=pt(t);return e||(n.equals=On),oe&&q!==null&&q.l!==null&&((i=q.l).s??(i.s=[])).push(n),n}function mn(t,e=!1){return Br(Ln(t,e))}function Br(t){return W!==null&&!bt&&W.f&mt&&(wt===null?ms([t]):wt.push(t)),t}function it(t,e){return W!==null&&!bt&&Ae()&&W.f&(mt|Dn)&&(wt===null||!wt.includes(t))&&Ji(),as(t,e)}function as(t,e){return t.equals(e)||(t.v,t.v=e,t.wv=ri(),Vr(t,Rt),Ae()&&$!==null&&$.f&at&&!($.f&(At|ke))&&(Pt===null?ys([t]):Pt.push(t))),e}function Wn(t,e=1){var n=V(t),i=e===1?n++:n--;return it(t,n),i}function Vr(t,e){var n=t.reactions;if(n!==null)for(var i=Ae(),l=n.length,r=0;r<l;r++){var h=n[r],f=h.f;f&Rt||!i&&h===$||(yt(h,e),f&(at|_t)&&(f&mt?Vr(h,qt):Ze(h)))}}let os=!1;function Nt(t,e=null,n){if(typeof t!="object"||t===null||Ht in t)return t;const i=Tn(t);if(i!==Li&&i!==Fi)return t;var l=new Map,r=Rn(t),h=pt(0);r&&l.set("length",pt(t.length));var f;return new Proxy(t,{defineProperty(p,v,b){(!("value"in b)||b.configurable===!1||b.enumerable===!1||b.writable===!1)&&ji();var x=l.get(v);return x===void 0?(x=pt(b.value),l.set(v,x)):it(x,Nt(b.value,f)),!0},deleteProperty(p,v){var b=l.get(v);if(b===void 0)v in p&&l.set(v,pt(dt));else{if(r&&typeof v=="string"){var x=l.get("length"),w=Number(v);Number.isInteger(w)&&w<x.v&&it(x,w)}it(b,dt),Jn(h)}return!0},get(p,v,b){var d;if(v===Ht)return t;var x=l.get(v),w=v in p;if(x===void 0&&(!w||(d=ne(p,v))!=null&&d.writable)&&(x=pt(Nt(w?p[v]:dt,f)),l.set(v,x)),x!==void 0){var y=V(x);return y===dt?void 0:y}return Reflect.get(p,v,b)},getOwnPropertyDescriptor(p,v){var b=Reflect.getOwnPropertyDescriptor(p,v);if(b&&"value"in b){var x=l.get(v);x&&(b.value=V(x))}else if(b===void 0){var w=l.get(v),y=w==null?void 0:w.v;if(w!==void 0&&y!==dt)return{enumerable:!0,configurable:!0,value:y,writable:!0}}return b},has(p,v){var y;if(v===Ht)return!0;var b=l.get(v),x=b!==void 0&&b.v!==dt||Reflect.has(p,v);if(b!==void 0||$!==null&&(!x||(y=ne(p,v))!=null&&y.writable)){b===void 0&&(b=pt(x?Nt(p[v],f):dt),l.set(v,b));var w=V(b);if(w===dt)return!1}return x},set(p,v,b,x){var s;var w=l.get(v),y=v in p;if(r&&v==="length")for(var d=b;d<w.v;d+=1){var c=l.get(d+"");c!==void 0?it(c,dt):d in p&&(c=pt(dt),l.set(d+"",c))}w===void 0?(!y||(s=ne(p,v))!=null&&s.writable)&&(w=pt(void 0),it(w,Nt(b,f)),l.set(v,w)):(y=w.v!==dt,it(w,Nt(b,f)));var S=Reflect.getOwnPropertyDescriptor(p,v);if(S!=null&&S.set&&S.set.call(x,b),!y){if(r&&typeof v=="string"){var R=l.get("length"),o=Number(v);Number.isInteger(o)&&o>=R.v&&it(R,o+1)}Jn(h)}return!0},ownKeys(p){V(h);var v=Reflect.ownKeys(p).filter(w=>{var y=l.get(w);return y===void 0||y.v!==dt});for(var[b,x]of l)x.v!==dt&&!(b in p)&&v.push(b);return v},setPrototypeOf(){zi()}})}function Jn(t,e=1){it(t,t.v+e)}var Zn,Yr,Xr,Hr;function ls(){if(Zn===void 0){Zn=window,Yr=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype;Xr=ne(e,"firstChild").get,Hr=ne(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}function Kr(t=""){return document.createTextNode(t)}function Me(t){return Xr.call(t)}function Fn(t){return Hr.call(t)}function Kt(t,e){return Me(t)}function Mt(t,e){{var n=Me(t);return n instanceof Comment&&n.data===""?Fn(n):n}}function Se(t,e=1,n=!1){let i=t;for(;e--;)i=Fn(i);return i}function ot(t){var e=mt|Rt,n=W!==null&&W.f&mt?W:null;return $===null||n!==null&&n.f&_t?e|=_t:$.f|=Lr,{ctx:q,deps:null,effects:null,equals:Fr,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:n??$}}function cs(t){const e=ot(t);return e.equals=On,e}function qr(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)Ut(e[n])}}function hs(t){for(var e=t.parent;e!==null;){if(!(e.f&mt))return e;e=e.parent}return null}function us(t){var e,n=$;Vt(hs(t));try{qr(t),e=si(t)}finally{Vt(n)}return e}function jr(t){var e=us(t),n=(It||t.f&_t)&&t.deps!==null?qt:at;yt(t,n),t.equals(e)||(t.v=e,t.wv=ri())}function zr(t){$===null&&W===null&&Hi(),W!==null&&W.f&_t&&$===null&&Xi(),Un&&Yi()}function ds(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function le(t,e,n,i=!0){var l=(t&ke)!==0,r=$,h={ctx:q,deps:null,nodes_start:null,nodes_end:null,f:t|Rt,first:null,fn:e,last:null,next:null,parent:l?null:r,prev:null,teardown:null,transitions:null,wv:0};if(n){var f=re;try{$n(!0),Je(h),h.f|=Ii}catch(b){throw Ut(h),b}finally{$n(f)}}else e!==null&&Ze(h);var p=n&&h.deps===null&&h.first===null&&h.nodes_start===null&&h.teardown===null&&(h.f&(Lr|Fe))===0;if(!p&&!l&&i&&(r!==null&&ds(h,r),W!==null&&W.f&mt)){var v=W;(v.effects??(v.effects=[])).push(h)}return h}function Wr(t){const e=le(qe,null,!1);return yt(e,at),e.teardown=t,e}function K(t){zr();var e=$!==null&&($.f&At)!==0&&q!==null&&!q.m;if(e){var n=q;(n.e??(n.e=[])).push({fn:t,effect:$,reaction:W})}else{var i=Nn(t);return i}}function fs(t){return zr(),Re(t)}function gs(t){const e=le(ke,t,!0);return(n={})=>new Promise(i=>{n.outro?bn(e,()=>{Ut(e),i(void 0)}):(Ut(e),i(void 0))})}function Nn(t){return le(Gr,t,!1)}function yn(t,e){var n=q,i={effect:null,ran:!1};n.l.r1.push(i),i.effect=Re(()=>{t(),!i.ran&&(i.ran=!0,it(n.l.r2,!0),kt(e))})}function Jr(){var t=q;Re(()=>{if(V(t.l.r2)){for(var e of t.l.r1){var n=e.effect;n.f&at&&yt(n,qt),ce(n)&&Je(n),e.ran=!1}t.l.r2.v=!1}})}function Re(t){return le(qe,t,!0)}function ae(t,e=[],n=ot){const i=e.map(n);return In(()=>t(...i.map(V)))}function In(t,e=0){return le(qe|Dn|e,t,!0)}function Ue(t,e=!0){return le(qe|At,t,!0,e)}function Zr(t){var e=t.teardown;if(e!==null){const n=Un,i=W;tr(!0),Bt(null);try{e.call(null)}finally{tr(n),Bt(i)}}}function Qr(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){var i=n.next;Ut(n,e),n=i}}function ps(t){for(var e=t.first;e!==null;){var n=e.next;e.f&At||Ut(e),e=n}}function Ut(t,e=!0){var n=!1;if((e||t.f&Ui)&&t.nodes_start!==null){for(var i=t.nodes_start,l=t.nodes_end;i!==null;){var r=i===l?null:Fn(i);i.remove(),i=r}n=!0}Qr(t,e&&!n),Xe(t,0),yt(t,je);var h=t.transitions;if(h!==null)for(const p of h)p.stop();Zr(t);var f=t.parent;f!==null&&f.first!==null&&$r(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function $r(t){var e=t.parent,n=t.prev,i=t.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=n))}function bn(t,e){var n=[];ti(t,n,!0),_s(n,()=>{Ut(t),e&&e()})}function _s(t,e){var n=t.length;if(n>0){var i=()=>--n||e();for(var l of t)l.out(i)}else e()}function ti(t,e,n){if(!(t.f&se)){if(t.f^=se,t.transitions!==null)for(const h of t.transitions)(h.is_global||n)&&e.push(h);for(var i=t.first;i!==null;){var l=i.next,r=(i.f&ze)!==0||(i.f&At)!==0;ti(i,e,r?n:!1),i=l}}}function Qn(t){ei(t,!0)}function ei(t,e){if(t.f&se){t.f^=se,t.f&at||(t.f^=at),ce(t)&&(yt(t,Rt),Ze(t));for(var n=t.first;n!==null;){var i=n.next,l=(n.f&ze)!==0||(n.f&At)!==0;ei(n,l?e:!1),n=i}if(t.transitions!==null)for(const r of t.transitions)(r.is_global||e)&&r.in()}}let wn=!1,Cn=[];function vs(){wn=!1;const t=Cn.slice();Cn=[],vn(t)}function Mn(t){wn||(wn=!0,queueMicrotask(vs)),Cn.push(t)}let Le=!1,Be=!1,Ve=null,re=!1,Un=!1;function $n(t){re=t}function tr(t){Un=t}let Sn=[],xe=0;let W=null,bt=!1;function Bt(t){W=t}let $=null;function Vt(t){$=t}let wt=null;function ms(t){wt=t}let lt=null,ft=0,Pt=null;function ys(t){Pt=t}let ni=1,Ye=0,It=!1;function ri(){return++ni}function ce(t){var x;var e=t.f;if(e&Rt)return!0;if(e&qt){var n=t.deps,i=(e&_t)!==0;if(n!==null){var l,r,h=(e&Ne)!==0,f=i&&$!==null&&!It,p=n.length;if(h||f){var v=t,b=v.parent;for(l=0;l<p;l++)r=n[l],(h||!((x=r==null?void 0:r.reactions)!=null&&x.includes(v)))&&(r.reactions??(r.reactions=[])).push(v);h&&(v.f^=Ne),f&&b!==null&&!(b.f&_t)&&(v.f^=_t)}for(l=0;l<p;l++)if(r=n[l],ce(r)&&jr(r),r.wv>t.wv)return!0}(!i||$!==null&&!It)&&yt(t,at)}return!1}function bs(t,e){for(var n=e;n!==null;){if(n.f&Fe)try{n.fn(t);return}catch{n.f^=Fe}n=n.parent}throw Le=!1,t}function ws(t){return(t.f&je)===0&&(t.parent===null||(t.parent.f&Fe)===0)}function We(t,e,n,i){if(Le){if(n===null&&(Le=!1),ws(e))throw t;return}n!==null&&(Le=!0);{bs(t,e);return}}function ii(t,e,n=!0){var i=t.reactions;if(i!==null)for(var l=0;l<i.length;l++){var r=i[l];r.f&mt?ii(r,e,!1):e===r&&(n?yt(r,Rt):r.f&at&&yt(r,qt),Ze(r))}}function si(t){var y;var e=lt,n=ft,i=Pt,l=W,r=It,h=wt,f=q,p=bt,v=t.f;lt=null,ft=0,Pt=null,W=v&(At|ke)?null:t,It=(v&_t)!==0&&(!re||l===null||p),wt=null,jn(t.ctx),bt=!1,Ye++;try{var b=(0,t.fn)(),x=t.deps;if(lt!==null){var w;if(Xe(t,ft),x!==null&&ft>0)for(x.length=ft+lt.length,w=0;w<lt.length;w++)x[ft+w]=lt[w];else t.deps=x=lt;if(!It)for(w=ft;w<x.length;w++)((y=x[w]).reactions??(y.reactions=[])).push(t)}else x!==null&&ft<x.length&&(Xe(t,ft),x.length=ft);if(Ae()&&Pt!==null&&!bt&&x!==null&&!(t.f&(mt|qt|Rt)))for(w=0;w<Pt.length;w++)ii(Pt[w],t);return l!==null&&Ye++,b}finally{lt=e,ft=n,Pt=i,W=l,It=r,wt=h,jn(f),bt=p}}function Cs(t,e){let n=e.reactions;if(n!==null){var i=Oi.call(n,t);if(i!==-1){var l=n.length-1;l===0?n=e.reactions=null:(n[i]=n[l],n.pop())}}n===null&&e.f&mt&&(lt===null||!lt.includes(e))&&(yt(e,qt),e.f&(_t|Ne)||(e.f^=Ne),qr(e),Xe(e,0))}function Xe(t,e){var n=t.deps;if(n!==null)for(var i=e;i<n.length;i++)Cs(t,n[i])}function Je(t){var e=t.f;if(!(e&je)){yt(t,at);var n=$,i=q;$=t;try{e&Dn?ps(t):Qr(t),Zr(t);var l=si(t);t.teardown=typeof l=="function"?l:null,t.wv=ni;var r=t.deps,h;qn&&Zi&&t.f&Rt}catch(f){We(f,t,n,i||t.ctx)}finally{$=n}}}function Ss(){if(xe>1e3){xe=0;try{Ki()}catch(t){if(Ve!==null)We(t,Ve,null);else throw t}}xe++}function xs(t){var e=t.length;if(e!==0){Ss();var n=re;re=!0;try{for(var i=0;i<e;i++){var l=t[i];l.f&at||(l.f^=at);var r=ks(l);Es(r)}}finally{re=n}}}function Es(t){var e=t.length;if(e!==0)for(var n=0;n<e;n++){var i=t[n];if(!(i.f&(je|se)))try{ce(i)&&(Je(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?$r(i):i.fn=null))}catch(l){We(l,i,null,i.ctx)}}}function Ps(){if(Be=!1,xe>1001)return;const t=Sn;Sn=[],xs(t),Be||(xe=0,Ve=null)}function Ze(t){Be||(Be=!0,queueMicrotask(Ps)),Ve=t;for(var e=t;e.parent!==null;){e=e.parent;var n=e.f;if(n&(ke|At)){if(!(n&at))return;e.f^=at}}Sn.push(e)}function ks(t){var e=[],n=t.first;t:for(;n!==null;){var i=n.f,l=(i&At)!==0,r=l&&(i&at)!==0,h=n.next;if(!r&&!(i&se)){if(i&Gr)e.push(n);else if(l)n.f^=at;else{var f=W;try{W=n,ce(n)&&Je(n)}catch(b){We(b,n,null,n.ctx)}finally{W=f}}var p=n.first;if(p!==null){n=p;continue}}if(h===null){let b=n.parent;for(;b!==null;){if(t===b)break t;var v=b.next;if(v!==null){n=v;continue t}b=b.parent}}n=h}return e}function V(t){var e=t.f,n=(e&mt)!==0;if(W!==null&&!bt){wt!==null&&wt.includes(t)&&Wi();var i=W.deps;t.rv<Ye&&(t.rv=Ye,lt===null&&i!==null&&i[ft]===t?ft++:lt===null?lt=[t]:(!It||!lt.includes(t))&&lt.push(t))}else if(n&&t.deps===null&&t.effects===null){var l=t,r=l.parent;r!==null&&!(r.f&_t)&&(l.f^=_t)}return n&&(l=t,ce(l)&&jr(l)),t.v}function kt(t){var e=bt;try{return bt=!0,t()}finally{bt=e}}const As=-7169;function yt(t,e){t.f=t.f&As|e}function Yt(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Ht in t)xn(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Ht in n&&xn(n)}}}function xn(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{xn(t[i],e)}catch{}const n=Tn(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=Or(n);for(let l in i){const r=i[l].get;if(r)try{r.call(t)}catch{}}}}}function Rs(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const Ts=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Ds(t){return Ts.includes(t)}const Os={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Gs(t){return t=t.toLowerCase(),Os[t]??t}const Ls=["touchstart","touchmove"];function Fs(t){return Ls.includes(t)}function Ns(t,e){if(e){const n=document.body;t.autofocus=!0,Mn(()=>{document.activeElement===n&&t.focus()})}}let er=!1;function Is(){er||(er=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const n of t.target.elements)(e=n.__on_r)==null||e.call(n)})},{capture:!0}))}function ai(t){var e=W,n=$;Bt(null),Vt(null);try{return t()}finally{Bt(e),Vt(n)}}function Ms(t,e,n,i=n){t.addEventListener(e,()=>ai(n));const l=t.__on_r;l?t.__on_r=()=>{l(),i(!0)}:t.__on_r=()=>i(!0),Is()}const oi=new Set,En=new Set;function li(t,e,n,i={}){function l(r){if(i.capture||Ce.call(e,r),!r.cancelBubble)return ai(()=>n==null?void 0:n.call(this,r))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Mn(()=>{e.addEventListener(t,l,i)}):e.addEventListener(t,l,i),l}function ue(t,e,n,i,l){var r={capture:i,passive:l},h=li(t,e,n,r);(e===document.body||e===window||e===document)&&Wr(()=>{e.removeEventListener(t,h,r)})}function Us(t){for(var e=0;e<t.length;e++)oi.add(t[e]);for(var n of En)n(t)}function Ce(t){var o;var e=this,n=e.ownerDocument,i=t.type,l=((o=t.composedPath)==null?void 0:o.call(t))||[],r=l[0]||t.target,h=0,f=t.__root;if(f){var p=l.indexOf(f);if(p!==-1&&(e===document||e===window)){t.__root=e;return}var v=l.indexOf(e);if(v===-1)return;p<=v&&(h=p)}if(r=l[h]||t.target,r!==e){Dr(t,"currentTarget",{configurable:!0,get(){return r||n}});var b=W,x=$;Bt(null),Vt(null);try{for(var w,y=[];r!==null;){var d=r.assignedSlot||r.parentNode||r.host||null;try{var c=r["__"+i];if(c!==void 0&&!r.disabled)if(Rn(c)){var[S,...R]=c;S.apply(r,[t,...R])}else c.call(r,t)}catch(s){w?y.push(s):w=s}if(t.cancelBubble||d===e||d===null)break;r=d}if(w){for(let s of y)queueMicrotask(()=>{throw s});throw w}}finally{t.__root=e,delete t.currentTarget,Bt(b),Vt(x)}}}function Bs(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Pn(t,e){var n=$;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function jt(t,e){var n=(e&rs)!==0,i=(e&is)!==0,l,r=!t.startsWith("<!>");return()=>{l===void 0&&(l=Bs(r?t:"<!>"+t),n||(l=Me(l)));var h=i||Yr?document.importNode(l,!0):l.cloneNode(!0);if(n){var f=Me(h),p=h.lastChild;Pn(f,p)}else Pn(h,h);return h}}function Ee(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Kr();return t.append(e,n),Pn(e,n),t}function vt(t,e){t!==null&&t.before(e)}function ci(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function Vs(t,e){return Ys(t,e)}const $t=new Map;function Ys(t,{target:e,anchor:n,props:i={},events:l,context:r,intro:h=!0}){ls();var f=new Set,p=x=>{for(var w=0;w<x.length;w++){var y=x[w];if(!f.has(y)){f.add(y);var d=Fs(y);e.addEventListener(y,Ce,{passive:d});var c=$t.get(y);c===void 0?(document.addEventListener(y,Ce,{passive:d}),$t.set(y,1)):$t.set(y,c+1)}}};p(Gi(oi)),En.add(p);var v=void 0,b=gs(()=>{var x=n??e.appendChild(Kr());return Ue(()=>{if(r){Tt({});var w=q;w.c=r}l&&(i.$$events=l),v=t(x,i)||{},r&&Dt()}),()=>{var d;for(var w of f){e.removeEventListener(w,Ce);var y=$t.get(w);--y===0?(document.removeEventListener(w,Ce),$t.delete(w)):$t.set(w,y)}En.delete(p),x!==n&&((d=x.parentNode)==null||d.removeChild(x))}});return Xs.set(v,b),v}let Xs=new WeakMap;function Bn(t,e,n=!1){var i=t,l=null,r=null,h=dt,f=n?ze:0,p=!1;const v=(x,w=!0)=>{p=!0,b(w,x)},b=(x,w)=>{h!==(h=x)&&(h?(l?Qn(l):w&&(l=Ue(()=>w(i))),r&&bn(r,()=>{r=null})):(r?Qn(r):w&&(r=Ue(()=>w(i))),l&&bn(l,()=>{l=null})))};In(()=>{p=!1,e(v),p||b(null,null)},f)}function nr(t,e,n,i,l){var f;var r=(f=e.$$slots)==null?void 0:f[n],h=!1;r===!0&&(r=e.children,h=!0),r===void 0||r(t,h?()=>i:i)}function hi(t,e,...n){var i=t,l=Xt,r;In(()=>{l!==(l=e())&&(r&&(Ut(r),r=null),r=Ue(()=>l(i,...n)))},ze)}function ui(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(n=ui(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Hs(){for(var t,e,n=0,i="",l=arguments.length;n<l;n++)(t=arguments[n])&&(e=ui(t))&&(i&&(i+=" "),i+=e);return i}function Ks(t){return typeof t=="object"?Hs(t):t??""}function qs(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function js(t,e,n,i){var l=t.__attributes??(t.__attributes={});l[e]!==(l[e]=n)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[Vi]=n),n==null?t.removeAttribute(e):typeof n!="string"&&di(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Vn(t,e,n,i,l=!1,r=!1,h=!1){var f=e||{},p=t.tagName==="OPTION";for(var v in e)v in n||(n[v]=null);n.class&&(n.class=Ks(n.class));var b=di(t),x=t.__attributes??(t.__attributes={});for(const o in n){let s=n[o];if(p&&o==="value"&&s==null){t.value=t.__value="",f[o]=s;continue}var w=f[o];if(s!==w){f[o]=s;var y=o[0]+o[1];if(y!=="$$"){if(y==="on"){const u={},m="$$"+o;let k=o.slice(2);var d=Ds(k);if(Rs(k)&&(k=k.slice(0,-7),u.capture=!0),!d&&w){if(s!=null)continue;t.removeEventListener(k,f[m],u),f[m]=null}if(s!=null)if(d)t[`__${k}`]=s,Us([k]);else{let D=function(C){f[o].call(this,C)};var R=D;f[m]=li(k,t,D,u)}else d&&(t[`__${k}`]=void 0)}else if(o==="style"&&s!=null)t.style.cssText=s+"";else if(o==="autofocus")Ns(t,!!s);else if(!r&&(o==="__value"||o==="value"&&s!=null))t.value=t.__value=s;else if(o==="selected"&&p)qs(t,s);else{var c=o;l||(c=Gs(c));var S=c==="defaultValue"||c==="defaultChecked";if(s==null&&!r&&!S)if(x[o]=null,c==="value"||c==="checked"){let u=t;const m=e===void 0;if(c==="value"){let k=u.defaultValue;u.removeAttribute(c),u.defaultValue=k,u.value=u.__value=m?k:null}else{let k=u.defaultChecked;u.removeAttribute(c),u.defaultChecked=k,u.checked=m?k:!1}}else t.removeAttribute(o);else S||b.includes(c)&&(r||typeof s!="string")?t[c]=s:typeof s!="function"&&js(t,c,s)}o==="style"&&"__styles"in t&&(t.__styles={})}}}return f}var rr=new Map;function di(t){var e=rr.get(t.nodeName);if(e)return e;rr.set(t.nodeName,e=[]);for(var n,i=t,l=Element.prototype;l!==i;){n=Or(i);for(var r in n)n[r].set&&e.push(r);i=Tn(i)}return e}function zs(t,e,n){var i=t.__className,l=Ws(e);(i!==l||os)&&(e==null?t.removeAttribute("class"):t.className=l,t.__className=l)}function Ws(t,e){return(t??"")+""}function Js(t,e,n=e){var i=Ae();Ms(t,"input",l=>{var r=l?t.defaultValue:t.value;if(r=sn(t)?an(r):r,n(r),i&&r!==(r=e())){var h=t.selectionStart,f=t.selectionEnd;t.value=r??"",f!==null&&(t.selectionStart=h,t.selectionEnd=Math.min(f,t.value.length))}}),kt(e)==null&&t.value&&n(sn(t)?an(t.value):t.value),Re(()=>{var l=e();sn(t)&&l===an(t.value)||t.type==="date"&&!l&&!t.value||l!==t.value&&(t.value=l??"")})}function sn(t){var e=t.type;return e==="number"||e==="range"}function an(t){return t===""?null:+t}function ir(t,e){return t===e||(t==null?void 0:t[Ht])===e}function fi(t={},e,n,i){return Nn(()=>{var l,r;return Re(()=>{l=r,r=[],kt(()=>{t!==n(...r)&&(e(t,...r),l&&ir(n(...l),t)&&e(null,...l))})}),()=>{Mn(()=>{r&&ir(n(...r),t)&&e(null,...r)})}}),t}function gi(t=!1){const e=q,n=e.l.u;if(!n)return;let i=()=>Yt(e.s);if(t){let l=0,r={};const h=ot(()=>{let f=!1;const p=e.s;for(const v in p)p[v]!==r[v]&&(r[v]=p[v],f=!0);return f&&l++,l});i=()=>V(h)}n.b.length&&fs(()=>{sr(e,i),vn(n.b)}),K(()=>{const l=kt(()=>n.m.map(Ni));return()=>{for(const r of l)typeof r=="function"&&r()}}),n.a.length&&K(()=>{sr(e,i),vn(n.a)})}function sr(t,e){if(t.l.s)for(const n of t.l.s)V(n);e()}function de(t,e){var r;var n=(r=t.$$events)==null?void 0:r[e.type],i=Rn(n)?n.slice():n==null?[]:[n];for(var l of i)l.call(this,e)}function pi(t,e,n){if(t==null)return e(void 0),Xt;const i=kt(()=>t.subscribe(e,n));return i.unsubscribe?()=>i.unsubscribe():i}const te=[];function _i(t,e=Xt){let n=null;const i=new Set;function l(f){if(Nr(t,f)&&(t=f,n)){const p=!te.length;for(const v of i)v[1](),te.push(v,t);if(p){for(let v=0;v<te.length;v+=2)te[v][0](te[v+1]);te.length=0}}}function r(f){l(f(t))}function h(f,p=Xt){const v=[f,p];return i.add(v),i.size===1&&(n=e(l,r)||Xt),f(t),()=>{i.delete(v),i.size===0&&n&&(n(),n=null)}}return{set:l,update:r,subscribe:h}}function Zs(t){let e;return pi(t,n=>e=n)(),e}let Oe=!1,kn=Symbol();function Yn(t,e,n){const i=n[e]??(n[e]={store:null,source:Ln(void 0),unsubscribe:Xt});if(i.store!==t&&!(kn in n))if(i.unsubscribe(),i.store=t??null,t==null)i.source.v=void 0,i.unsubscribe=Xt;else{var l=!0;i.unsubscribe=pi(t,r=>{l?i.source.v=r:it(i.source,r)}),l=!1}return t&&kn in n?Zs(t):V(i.source)}function Xn(){const t={};function e(){Wr(()=>{for(var n in t)t[n].unsubscribe();Dr(t,kn,{enumerable:!1,value:!0})})}return[t,e]}function Qs(t){var e=Oe;try{return Oe=!1,[t(),Oe]}finally{Oe=e}}const $s={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Qe(t,e,n){return new Proxy({props:t,exclude:e},$s)}const ta={get(t,e){if(!t.exclude.includes(e))return V(t.version),e in t.special?t.special[e]():t.props[e]},set(t,e,n){return e in t.special||(t.special[e]=Y({get[e](){return t.props[e]}},e,Ir)),t.special[e](n),Wn(t.version),!0},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},deleteProperty(t,e){return t.exclude.includes(e)||(t.exclude.push(e),Wn(t.version)),!0},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function He(t,e){return new Proxy({props:t,exclude:e,special:{},version:pt(0)},ta)}function Y(t,e,n,i){var k;var l=(n&$i)!==0,r=!oe||(n&ts)!==0,h=(n&es)!==0,f=(n&ns)!==0,p=!1,v;h?[v,p]=Qs(()=>t[e]):v=t[e];var b=Ht in t||Bi in t,x=h&&(((k=ne(t,e))==null?void 0:k.set)??(b&&e in t&&(D=>t[e]=D)))||void 0,w=i,y=!0,d=!1,c=()=>(d=!0,y&&(y=!1,f?w=kt(i):w=i),w);v===void 0&&i!==void 0&&(x&&r&&qi(),v=c(),x&&x(v));var S;if(r)S=()=>{var D=t[e];return D===void 0?c():(y=!0,d=!1,D)};else{var R=(l?ot:cs)(()=>t[e]);R.f|=Mi,S=()=>{var D=V(R);return D!==void 0&&(w=void 0),D===void 0?w:D}}if(!(n&Ir))return S;if(x){var o=t.$$legacy;return function(D,C){return arguments.length>0?((!r||!C||o||p)&&x(C?S():D),D):S()}}var s=!1,u=Ln(v),m=ot(()=>{var D=S(),C=V(u);return s?(s=!1,C):u.v=D});return l||(m.equals=On),function(D,C){if(arguments.length>0){const G=C?V(m):r&&h?Nt(D):D;return m.equals(G)||(s=!0,it(u,G),d&&w!==void 0&&(w=G),kt(()=>V(m))),D}return V(m)}}function Te(t){q===null&&Gn(),oe&&q.l!==null?ea(q).m.push(t):K(()=>{const e=kt(t);if(typeof e=="function")return e})}function $e(t){q===null&&Gn(),Te(()=>()=>kt(t))}function ea(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const na="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(na);var ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ra(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var on={},ln={},cn={},or;function st(){return or||(or=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof ar<"u"?ar:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.18",isBrowser:n(),isUnminified:/param/.test((function(l){}).toString()),dblClickWindow:400,getAngle(l){return t.Konva.angleDeg?l*e:l},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var l;return(l=t.Konva.Transformer)===null||l===void 0?void 0:l.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(l){t.glob.Konva=l}};const i=l=>{t.Konva[l.prototype.getClassName()]=l};t._registerNode=i,t.Konva._injectGlobal(t.Konva)}(cn)),cn}var lr;function ct(){return lr||(lr=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=st();class n{constructor(u=[1,0,0,1,0,0]){this.dirty=!1,this.m=u&&u.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(u){u.m[0]=this.m[0],u.m[1]=this.m[1],u.m[2]=this.m[2],u.m[3]=this.m[3],u.m[4]=this.m[4],u.m[5]=this.m[5]}point(u){const m=this.m;return{x:m[0]*u.x+m[2]*u.y+m[4],y:m[1]*u.x+m[3]*u.y+m[5]}}translate(u,m){return this.m[4]+=this.m[0]*u+this.m[2]*m,this.m[5]+=this.m[1]*u+this.m[3]*m,this}scale(u,m){return this.m[0]*=u,this.m[1]*=u,this.m[2]*=m,this.m[3]*=m,this}rotate(u){const m=Math.cos(u),k=Math.sin(u),D=this.m[0]*m+this.m[2]*k,C=this.m[1]*m+this.m[3]*k,G=this.m[0]*-k+this.m[2]*m,E=this.m[1]*-k+this.m[3]*m;return this.m[0]=D,this.m[1]=C,this.m[2]=G,this.m[3]=E,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(u,m){const k=this.m[0]+this.m[2]*m,D=this.m[1]+this.m[3]*m,C=this.m[2]+this.m[0]*u,G=this.m[3]+this.m[1]*u;return this.m[0]=k,this.m[1]=D,this.m[2]=C,this.m[3]=G,this}multiply(u){const m=this.m[0]*u.m[0]+this.m[2]*u.m[1],k=this.m[1]*u.m[0]+this.m[3]*u.m[1],D=this.m[0]*u.m[2]+this.m[2]*u.m[3],C=this.m[1]*u.m[2]+this.m[3]*u.m[3],G=this.m[0]*u.m[4]+this.m[2]*u.m[5]+this.m[4],E=this.m[1]*u.m[4]+this.m[3]*u.m[5]+this.m[5];return this.m[0]=m,this.m[1]=k,this.m[2]=D,this.m[3]=C,this.m[4]=G,this.m[5]=E,this}invert(){const u=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),m=this.m[3]*u,k=-this.m[1]*u,D=-this.m[2]*u,C=this.m[0]*u,G=u*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),E=u*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=m,this.m[1]=k,this.m[2]=D,this.m[3]=C,this.m[4]=G,this.m[5]=E,this}getMatrix(){return this.m}decompose(){const u=this.m[0],m=this.m[1],k=this.m[2],D=this.m[3],C=this.m[4],G=this.m[5],E=u*D-m*k,O={x:C,y:G,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(u!=0||m!=0){const N=Math.sqrt(u*u+m*m);O.rotation=m>0?Math.acos(u/N):-Math.acos(u/N),O.scaleX=N,O.scaleY=E/N,O.skewX=(u*k+m*D)/E,O.skewY=0}else if(k!=0||D!=0){const N=Math.sqrt(k*k+D*D);O.rotation=Math.PI/2-(D>0?Math.acos(-k/N):-Math.acos(k/N)),O.scaleX=E/N,O.scaleY=N,O.skewX=0,O.skewY=(u*k+m*D)/E}return O.rotation=t.Util._getRotation(O.rotation),O}}t.Transform=n;const i="[object Array]",l="[object Number]",r="[object String]",h="[object Boolean]",f=Math.PI/180,p=180/Math.PI,v="#",b="",x="0",w="Konva warning: ",y="Konva error: ",d="rgb(",c={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},S=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let R=[];const o=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(s){setTimeout(s,60)};t.Util={_isElement(s){return!!(s&&s.nodeType==1)},_isFunction(s){return!!(s&&s.constructor&&s.call&&s.apply)},_isPlainObject(s){return!!s&&s.constructor===Object},_isArray(s){return Object.prototype.toString.call(s)===i},_isNumber(s){return Object.prototype.toString.call(s)===l&&!isNaN(s)&&isFinite(s)},_isString(s){return Object.prototype.toString.call(s)===r},_isBoolean(s){return Object.prototype.toString.call(s)===h},isObject(s){return s instanceof Object},isValidSelector(s){if(typeof s!="string")return!1;const u=s[0];return u==="#"||u==="."||u===u.toUpperCase()},_sign(s){return s===0||s>0?1:-1},requestAnimFrame(s){R.push(s),R.length===1&&o(function(){const u=R;R=[],u.forEach(function(m){m()})})},createCanvasElement(){const s=document.createElement("canvas");try{s.style=s.style||{}}catch{}return s},createImageElement(){return document.createElement("img")},_isInDocument(s){for(;s=s.parentNode;)if(s==document)return!0;return!1},_urlToImage(s,u){const m=t.Util.createImageElement();m.onload=function(){u(m)},m.src=s},_rgbToHex(s,u,m){return((1<<24)+(s<<16)+(u<<8)+m).toString(16).slice(1)},_hexToRgb(s){s=s.replace(v,b);const u=parseInt(s,16);return{r:u>>16&255,g:u>>8&255,b:u&255}},getRandomColor(){let s=(Math.random()*16777215<<0).toString(16);for(;s.length<6;)s=x+s;return v+s},getRGB(s){let u;return s in c?(u=c[s],{r:u[0],g:u[1],b:u[2]}):s[0]===v?this._hexToRgb(s.substring(1)):s.substr(0,4)===d?(u=S.exec(s.replace(/ /g,"")),{r:parseInt(u[1],10),g:parseInt(u[2],10),b:parseInt(u[3],10)}):{r:0,g:0,b:0}},colorToRGBA(s){return s=s||"black",t.Util._namedColorToRBA(s)||t.Util._hex3ColorToRGBA(s)||t.Util._hex4ColorToRGBA(s)||t.Util._hex6ColorToRGBA(s)||t.Util._hex8ColorToRGBA(s)||t.Util._rgbColorToRGBA(s)||t.Util._rgbaColorToRGBA(s)||t.Util._hslColorToRGBA(s)},_namedColorToRBA(s){const u=c[s.toLowerCase()];return u?{r:u[0],g:u[1],b:u[2],a:1}:null},_rgbColorToRGBA(s){if(s.indexOf("rgb(")===0){s=s.match(/rgb\(([^)]+)\)/)[1];const u=s.split(/ *, */).map(Number);return{r:u[0],g:u[1],b:u[2],a:1}}},_rgbaColorToRGBA(s){if(s.indexOf("rgba(")===0){s=s.match(/rgba\(([^)]+)\)/)[1];const u=s.split(/ *, */).map((m,k)=>m.slice(-1)==="%"?k===3?parseInt(m)/100:parseInt(m)/100*255:Number(m));return{r:u[0],g:u[1],b:u[2],a:u[3]}}},_hex8ColorToRGBA(s){if(s[0]==="#"&&s.length===9)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:parseInt(s.slice(7,9),16)/255}},_hex6ColorToRGBA(s){if(s[0]==="#"&&s.length===7)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:1}},_hex4ColorToRGBA(s){if(s[0]==="#"&&s.length===5)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:parseInt(s[4]+s[4],16)/255}},_hex3ColorToRGBA(s){if(s[0]==="#"&&s.length===4)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:1}},_hslColorToRGBA(s){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(s)){const[u,...m]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(s),k=Number(m[0])/360,D=Number(m[1])/100,C=Number(m[2])/100;let G,E,O;if(D===0)return O=C*255,{r:Math.round(O),g:Math.round(O),b:Math.round(O),a:1};C<.5?G=C*(1+D):G=C+D-C*D;const N=2*C-G,a=[0,0,0];for(let g=0;g<3;g++)E=k+1/3*-(g-1),E<0&&E++,E>1&&E--,6*E<1?O=N+(G-N)*6*E:2*E<1?O=G:3*E<2?O=N+(G-N)*(2/3-E)*6:O=N,a[g]=O*255;return{r:Math.round(a[0]),g:Math.round(a[1]),b:Math.round(a[2]),a:1}}},haveIntersection(s,u){return!(u.x>s.x+s.width||u.x+u.width<s.x||u.y>s.y+s.height||u.y+u.height<s.y)},cloneObject(s){const u={};for(const m in s)this._isPlainObject(s[m])?u[m]=this.cloneObject(s[m]):this._isArray(s[m])?u[m]=this.cloneArray(s[m]):u[m]=s[m];return u},cloneArray(s){return s.slice(0)},degToRad(s){return s*f},radToDeg(s){return s*p},_degToRad(s){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(s)},_radToDeg(s){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(s)},_getRotation(s){return e.Konva.angleDeg?t.Util.radToDeg(s):s},_capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)},throw(s){throw new Error(y+s)},error(s){console.error(y+s)},warn(s){e.Konva.showWarnings&&console.warn(w+s)},each(s,u){for(const m in s)u(m,s[m])},_inRange(s,u,m){return u<=s&&s<m},_getProjectionToSegment(s,u,m,k,D,C){let G,E,O;const N=(s-m)*(s-m)+(u-k)*(u-k);if(N==0)G=s,E=u,O=(D-m)*(D-m)+(C-k)*(C-k);else{const a=((D-s)*(m-s)+(C-u)*(k-u))/N;a<0?(G=s,E=u,O=(s-D)*(s-D)+(u-C)*(u-C)):a>1?(G=m,E=k,O=(m-D)*(m-D)+(k-C)*(k-C)):(G=s+a*(m-s),E=u+a*(k-u),O=(G-D)*(G-D)+(E-C)*(E-C))}return[G,E,O]},_getProjectionToLine(s,u,m){const k=t.Util.cloneObject(s);let D=Number.MAX_VALUE;return u.forEach(function(C,G){if(!m&&G===u.length-1)return;const E=u[(G+1)%u.length],O=t.Util._getProjectionToSegment(C.x,C.y,E.x,E.y,s.x,s.y),N=O[0],a=O[1],g=O[2];g<D&&(k.x=N,k.y=a,D=g)}),k},_prepareArrayForTween(s,u,m){const k=[],D=[];if(s.length>u.length){const G=u;u=s,s=G}for(let G=0;G<s.length;G+=2)k.push({x:s[G],y:s[G+1]});for(let G=0;G<u.length;G+=2)D.push({x:u[G],y:u[G+1]});const C=[];return D.forEach(function(G){const E=t.Util._getProjectionToLine(G,k,m);C.push(E.x),C.push(E.y)}),C},_prepareToStringify(s){let u;s.visitedByCircularReferenceRemoval=!0;for(const m in s)if(s.hasOwnProperty(m)&&s[m]&&typeof s[m]=="object"){if(u=Object.getOwnPropertyDescriptor(s,m),s[m].visitedByCircularReferenceRemoval||t.Util._isElement(s[m]))if(u.configurable)delete s[m];else return null;else if(t.Util._prepareToStringify(s[m])===null)if(u.configurable)delete s[m];else return null}return delete s.visitedByCircularReferenceRemoval,s},_assign(s,u){for(const m in u)s[m]=u[m];return s},_getFirstPointerId(s){return s.touches?s.changedTouches[0].identifier:s.pointerId||999},releaseCanvas(...s){e.Konva.releaseCanvasOnDestroy&&s.forEach(u=>{u.width=0,u.height=0})},drawRoundedRectPath(s,u,m,k){let D=0,C=0,G=0,E=0;typeof k=="number"?D=C=G=E=Math.min(k,u/2,m/2):(D=Math.min(k[0]||0,u/2,m/2),C=Math.min(k[1]||0,u/2,m/2),E=Math.min(k[2]||0,u/2,m/2),G=Math.min(k[3]||0,u/2,m/2)),s.moveTo(D,0),s.lineTo(u-C,0),s.arc(u-C,C,C,Math.PI*3/2,0,!1),s.lineTo(u,m-E),s.arc(u-E,m-E,E,0,Math.PI/2,!1),s.lineTo(G,m),s.arc(G,m-G,G,Math.PI/2,Math.PI,!1),s.lineTo(0,D),s.arc(D,D,D,Math.PI,Math.PI*3/2,!1)}}}(ln)),ln}var ut={},cr;function zt(){if(cr)return ut;cr=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.RGBComponent=i,ut.alphaComponent=l,ut.getNumberValidator=r,ut.getNumberOrArrayOfNumbersValidator=h,ut.getNumberOrAutoValidator=f,ut.getStringValidator=p,ut.getStringOrGradientValidator=v,ut.getFunctionValidator=b,ut.getNumberArrayValidator=x,ut.getBooleanValidator=w,ut.getComponentValidator=y;const t=st(),e=ct();function n(d){return e.Util._isString(d)?'"'+d+'"':Object.prototype.toString.call(d)==="[object Number]"||e.Util._isBoolean(d)?d:Object.prototype.toString.call(d)}function i(d){return d>255?255:d<0?0:Math.round(d)}function l(d){return d>1?1:d<1e-4?1e-4:d}function r(){if(t.Konva.isUnminified)return function(d,c){return e.Util._isNumber(d)||e.Util.warn(n(d)+' is a not valid value for "'+c+'" attribute. The value should be a number.'),d}}function h(d){if(t.Konva.isUnminified)return function(c,S){let R=e.Util._isNumber(c),o=e.Util._isArray(c)&&c.length==d;return!R&&!o&&e.Util.warn(n(c)+' is a not valid value for "'+S+'" attribute. The value should be a number or Array<number>('+d+")"),c}}function f(){if(t.Konva.isUnminified)return function(d,c){var S=e.Util._isNumber(d),R=d==="auto";return S||R||e.Util.warn(n(d)+' is a not valid value for "'+c+'" attribute. The value should be a number or "auto".'),d}}function p(){if(t.Konva.isUnminified)return function(d,c){return e.Util._isString(d)||e.Util.warn(n(d)+' is a not valid value for "'+c+'" attribute. The value should be a string.'),d}}function v(){if(t.Konva.isUnminified)return function(d,c){const S=e.Util._isString(d),R=Object.prototype.toString.call(d)==="[object CanvasGradient]"||d&&d.addColorStop;return S||R||e.Util.warn(n(d)+' is a not valid value for "'+c+'" attribute. The value should be a string or a native gradient.'),d}}function b(){if(t.Konva.isUnminified)return function(d,c){return e.Util._isFunction(d)||e.Util.warn(n(d)+' is a not valid value for "'+c+'" attribute. The value should be a function.'),d}}function x(){if(t.Konva.isUnminified)return function(d,c){const S=Int8Array?Object.getPrototypeOf(Int8Array):null;return S&&d instanceof S||(e.Util._isArray(d)?d.forEach(function(R){e.Util._isNumber(R)||e.Util.warn('"'+c+'" attribute has non numeric element '+R+". Make sure that all elements are numbers.")}):e.Util.warn(n(d)+' is a not valid value for "'+c+'" attribute. The value should be a array of numbers.')),d}}function w(){if(t.Konva.isUnminified)return function(d,c){var S=d===!0||d===!1;return S||e.Util.warn(n(d)+' is a not valid value for "'+c+'" attribute. The value should be a boolean.'),d}}function y(d){if(t.Konva.isUnminified)return function(c,S){return c==null||e.Util.isObject(c)||e.Util.warn(n(c)+' is a not valid value for "'+S+'" attribute. The value should be an object with properties '+d),c}}return ut}var hr;function Wt(){return hr||(hr=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=ct(),n=zt(),i="get",l="set";t.Factory={addGetterSetter(r,h,f,p,v){t.Factory.addGetter(r,h,f),t.Factory.addSetter(r,h,p,v),t.Factory.addOverloadedGetterSetter(r,h)},addGetter(r,h,f){var p=i+e.Util._capitalize(h);r.prototype[p]=r.prototype[p]||function(){const v=this.attrs[h];return v===void 0?f:v}},addSetter(r,h,f,p){var v=l+e.Util._capitalize(h);r.prototype[v]||t.Factory.overWriteSetter(r,h,f,p)},overWriteSetter(r,h,f,p){var v=l+e.Util._capitalize(h);r.prototype[v]=function(b){return f&&b!==void 0&&b!==null&&(b=f.call(this,b,h)),this._setAttr(h,b),p&&p.call(this),this}},addComponentsGetterSetter(r,h,f,p,v){const b=f.length,x=e.Util._capitalize,w=i+x(h),y=l+x(h);r.prototype[w]=function(){const c={};for(let S=0;S<b;S++){const R=f[S];c[R]=this.getAttr(h+x(R))}return c};const d=(0,n.getComponentValidator)(f);r.prototype[y]=function(c){const S=this.attrs[h];p&&(c=p.call(this,c,h)),d&&d.call(this,c,h);for(const R in c)c.hasOwnProperty(R)&&this._setAttr(h+x(R),c[R]);return c||f.forEach(R=>{this._setAttr(h+x(R),void 0)}),this._fireChangeEvent(h,S,c),v&&v.call(this),this},t.Factory.addOverloadedGetterSetter(r,h)},addOverloadedGetterSetter(r,h){var f=e.Util._capitalize(h),p=l+f,v=i+f;r.prototype[h]=function(){return arguments.length?(this[p](arguments[0]),this):this[v]()}},addDeprecatedGetterSetter(r,h,f,p){e.Util.error("Adding deprecated "+h);const v=i+e.Util._capitalize(h),b=h+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[v]=function(){e.Util.error(b);const x=this.attrs[h];return x===void 0?f:x},t.Factory.addSetter(r,h,p,function(){e.Util.error(b)}),t.Factory.addOverloadedGetterSetter(r,h)},backCompat(r,h){e.Util.each(h,function(f,p){const v=r.prototype[p],b=i+e.Util._capitalize(f),x=l+e.Util._capitalize(f);function w(){v.apply(this,arguments),e.Util.error('"'+f+'" method is deprecated and will be removed soon. Use ""'+p+'" instead.')}r.prototype[f]=w,r.prototype[b]=w,r.prototype[x]=w})},afterSetFilter(){this._filterUpToDate=!1}}}(on)),on}var hn={},fe={},St={},xt={},ur;function vi(){if(ur)return xt;ur=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.HitContext=xt.SceneContext=xt.Context=void 0;const t=ct(),e=st();function n(R){const o=[],s=R.length,u=t.Util;for(let m=0;m<s;m++){let k=R[m];u._isNumber(k)?k=Math.round(k*1e3)/1e3:u._isString(k)||(k=k+""),o.push(k)}return o}const i=",",l="(",r=")",h="([",f="])",p=";",v="()",b="=",x=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],w=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],y=100;let d=class{constructor(o){this.canvas=o,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(o){o.fillEnabled()&&this._fill(o)}_fill(o){}strokeShape(o){o.hasStroke()&&this._stroke(o)}_stroke(o){}fillStrokeShape(o){o.attrs.fillAfterStrokeEnabled?(this.strokeShape(o),this.fillShape(o)):(this.fillShape(o),this.strokeShape(o))}getTrace(o,s){let u=this.traceArr,m=u.length,k="",D,C,G,E;for(D=0;D<m;D++)C=u[D],G=C.method,G?(E=C.args,k+=G,o?k+=v:t.Util._isArray(E[0])?k+=h+E.join(i)+f:(s&&(E=E.map(O=>typeof O=="number"?Math.floor(O):O)),k+=l+E.join(i)+r)):(k+=C.property,o||(k+=b+C.val)),k+=p;return k}clearTrace(){this.traceArr=[]}_trace(o){let s=this.traceArr,u;s.push(o),u=s.length,u>=y&&s.shift()}reset(){const o=this.getCanvas().getPixelRatio();this.setTransform(1*o,0,0,1*o,0,0)}getCanvas(){return this.canvas}clear(o){const s=this.getCanvas();o?this.clearRect(o.x||0,o.y||0,o.width||0,o.height||0):this.clearRect(0,0,s.getWidth()/s.pixelRatio,s.getHeight()/s.pixelRatio)}_applyLineCap(o){const s=o.attrs.lineCap;s&&this.setAttr("lineCap",s)}_applyOpacity(o){const s=o.getAbsoluteOpacity();s!==1&&this.setAttr("globalAlpha",s)}_applyLineJoin(o){const s=o.attrs.lineJoin;s&&this.setAttr("lineJoin",s)}setAttr(o,s){this._context[o]=s}arc(o,s,u,m,k,D){this._context.arc(o,s,u,m,k,D)}arcTo(o,s,u,m,k){this._context.arcTo(o,s,u,m,k)}beginPath(){this._context.beginPath()}bezierCurveTo(o,s,u,m,k,D){this._context.bezierCurveTo(o,s,u,m,k,D)}clearRect(o,s,u,m){this._context.clearRect(o,s,u,m)}clip(...o){this._context.clip.apply(this._context,o)}closePath(){this._context.closePath()}createImageData(o,s){const u=arguments;if(u.length===2)return this._context.createImageData(o,s);if(u.length===1)return this._context.createImageData(o)}createLinearGradient(o,s,u,m){return this._context.createLinearGradient(o,s,u,m)}createPattern(o,s){return this._context.createPattern(o,s)}createRadialGradient(o,s,u,m,k,D){return this._context.createRadialGradient(o,s,u,m,k,D)}drawImage(o,s,u,m,k,D,C,G,E){const O=arguments,N=this._context;O.length===3?N.drawImage(o,s,u):O.length===5?N.drawImage(o,s,u,m,k):O.length===9&&N.drawImage(o,s,u,m,k,D,C,G,E)}ellipse(o,s,u,m,k,D,C,G){this._context.ellipse(o,s,u,m,k,D,C,G)}isPointInPath(o,s,u,m){return u?this._context.isPointInPath(u,o,s,m):this._context.isPointInPath(o,s,m)}fill(...o){this._context.fill.apply(this._context,o)}fillRect(o,s,u,m){this._context.fillRect(o,s,u,m)}strokeRect(o,s,u,m){this._context.strokeRect(o,s,u,m)}fillText(o,s,u,m){m?this._context.fillText(o,s,u,m):this._context.fillText(o,s,u)}measureText(o){return this._context.measureText(o)}getImageData(o,s,u,m){return this._context.getImageData(o,s,u,m)}lineTo(o,s){this._context.lineTo(o,s)}moveTo(o,s){this._context.moveTo(o,s)}rect(o,s,u,m){this._context.rect(o,s,u,m)}roundRect(o,s,u,m,k){this._context.roundRect(o,s,u,m,k)}putImageData(o,s,u){this._context.putImageData(o,s,u)}quadraticCurveTo(o,s,u,m){this._context.quadraticCurveTo(o,s,u,m)}restore(){this._context.restore()}rotate(o){this._context.rotate(o)}save(){this._context.save()}scale(o,s){this._context.scale(o,s)}setLineDash(o){this._context.setLineDash?this._context.setLineDash(o):"mozDash"in this._context?this._context.mozDash=o:"webkitLineDash"in this._context&&(this._context.webkitLineDash=o)}getLineDash(){return this._context.getLineDash()}setTransform(o,s,u,m,k,D){this._context.setTransform(o,s,u,m,k,D)}stroke(o){o?this._context.stroke(o):this._context.stroke()}strokeText(o,s,u,m){this._context.strokeText(o,s,u,m)}transform(o,s,u,m,k,D){this._context.transform(o,s,u,m,k,D)}translate(o,s){this._context.translate(o,s)}_enableTrace(){let o=this,s=x.length,u=this.setAttr,m,k;const D=function(C){let G=o[C],E;o[C]=function(){return k=n(Array.prototype.slice.call(arguments,0)),E=G.apply(o,arguments),o._trace({method:C,args:k}),E}};for(m=0;m<s;m++)D(x[m]);o.setAttr=function(){u.apply(o,arguments);const C=arguments[0];let G=arguments[1];(C==="shadowOffsetX"||C==="shadowOffsetY"||C==="shadowBlur")&&(G=G/this.canvas.getPixelRatio()),o._trace({property:C,val:G})}}_applyGlobalCompositeOperation(o){const s=o.attrs.globalCompositeOperation;!s||s==="source-over"||this.setAttr("globalCompositeOperation",s)}};xt.Context=d,w.forEach(function(R){Object.defineProperty(d.prototype,R,{get(){return this._context[R]},set(o){this._context[R]=o}})});class c extends d{constructor(o,{willReadFrequently:s=!1}={}){super(o),this._context=o._canvas.getContext("2d",{willReadFrequently:s})}_fillColor(o){const s=o.fill();this.setAttr("fillStyle",s),o._fillFunc(this)}_fillPattern(o){this.setAttr("fillStyle",o._getFillPattern()),o._fillFunc(this)}_fillLinearGradient(o){const s=o._getLinearGradient();s&&(this.setAttr("fillStyle",s),o._fillFunc(this))}_fillRadialGradient(o){const s=o._getRadialGradient();s&&(this.setAttr("fillStyle",s),o._fillFunc(this))}_fill(o){const s=o.fill(),u=o.getFillPriority();if(s&&u==="color"){this._fillColor(o);return}const m=o.getFillPatternImage();if(m&&u==="pattern"){this._fillPattern(o);return}const k=o.getFillLinearGradientColorStops();if(k&&u==="linear-gradient"){this._fillLinearGradient(o);return}const D=o.getFillRadialGradientColorStops();if(D&&u==="radial-gradient"){this._fillRadialGradient(o);return}s?this._fillColor(o):m?this._fillPattern(o):k?this._fillLinearGradient(o):D&&this._fillRadialGradient(o)}_strokeLinearGradient(o){const s=o.getStrokeLinearGradientStartPoint(),u=o.getStrokeLinearGradientEndPoint(),m=o.getStrokeLinearGradientColorStops(),k=this.createLinearGradient(s.x,s.y,u.x,u.y);if(m){for(let D=0;D<m.length;D+=2)k.addColorStop(m[D],m[D+1]);this.setAttr("strokeStyle",k)}}_stroke(o){const s=o.dash(),u=o.getStrokeScaleEnabled();if(o.hasStroke()){if(!u){this.save();const k=this.getCanvas().getPixelRatio();this.setTransform(k,0,0,k,0,0)}this._applyLineCap(o),s&&o.dashEnabled()&&(this.setLineDash(s),this.setAttr("lineDashOffset",o.dashOffset())),this.setAttr("lineWidth",o.strokeWidth()),o.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),o.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(o):this.setAttr("strokeStyle",o.stroke()),o._strokeFunc(this),u||this.restore()}}_applyShadow(o){var s,u,m;const k=(s=o.getShadowRGBA())!==null&&s!==void 0?s:"black",D=(u=o.getShadowBlur())!==null&&u!==void 0?u:5,C=(m=o.getShadowOffset())!==null&&m!==void 0?m:{x:0,y:0},G=o.getAbsoluteScale(),E=this.canvas.getPixelRatio(),O=G.x*E,N=G.y*E;this.setAttr("shadowColor",k),this.setAttr("shadowBlur",D*Math.min(Math.abs(O),Math.abs(N))),this.setAttr("shadowOffsetX",C.x*O),this.setAttr("shadowOffsetY",C.y*N)}}xt.SceneContext=c;class S extends d{constructor(o){super(o),this._context=o._canvas.getContext("2d",{willReadFrequently:!0})}_fill(o){this.save(),this.setAttr("fillStyle",o.colorKey),o._fillFuncHit(this),this.restore()}strokeShape(o){o.hasHitStroke()&&this._stroke(o)}_stroke(o){if(o.hasHitStroke()){const s=o.getStrokeScaleEnabled();if(!s){this.save();const k=this.getCanvas().getPixelRatio();this.setTransform(k,0,0,k,0,0)}this._applyLineCap(o);const u=o.hitStrokeWidth(),m=u==="auto"?o.strokeWidth():u;this.setAttr("lineWidth",m),this.setAttr("strokeStyle",o.colorKey),o._strokeFuncHit(this),s||this.restore()}}}return xt.HitContext=S,xt}var dr;function tn(){if(dr)return St;dr=1,Object.defineProperty(St,"__esModule",{value:!0}),St.HitCanvas=St.SceneCanvas=St.Canvas=void 0;const t=ct(),e=vi(),n=st(),i=Wt(),l=zt();let r;function h(){if(r)return r;const b=t.Util.createCanvasElement(),x=b.getContext("2d");return r=function(){const w=n.Konva._global.devicePixelRatio||1,y=x.webkitBackingStorePixelRatio||x.mozBackingStorePixelRatio||x.msBackingStorePixelRatio||x.oBackingStorePixelRatio||x.backingStorePixelRatio||1;return w/y}(),t.Util.releaseCanvas(b),r}let f=class{constructor(x){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const y=(x||{}).pixelRatio||n.Konva.pixelRatio||h();this.pixelRatio=y,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(x){const w=this.pixelRatio;this.pixelRatio=x,this.setSize(this.getWidth()/w,this.getHeight()/w)}setWidth(x){this.width=this._canvas.width=x*this.pixelRatio,this._canvas.style.width=x+"px";const w=this.pixelRatio;this.getContext()._context.scale(w,w)}setHeight(x){this.height=this._canvas.height=x*this.pixelRatio,this._canvas.style.height=x+"px";const w=this.pixelRatio;this.getContext()._context.scale(w,w)}getWidth(){return this.width}getHeight(){return this.height}setSize(x,w){this.setWidth(x||0),this.setHeight(w||0)}toDataURL(x,w){try{return this._canvas.toDataURL(x,w)}catch{try{return this._canvas.toDataURL()}catch(d){return t.Util.error("Unable to get data URL. "+d.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};St.Canvas=f,i.Factory.addGetterSetter(f,"pixelRatio",void 0,(0,l.getNumberValidator)());class p extends f{constructor(x={width:0,height:0,willReadFrequently:!1}){super(x),this.context=new e.SceneContext(this,{willReadFrequently:x.willReadFrequently}),this.setSize(x.width,x.height)}}St.SceneCanvas=p;class v extends f{constructor(x={width:0,height:0}){super(x),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(x.width,x.height)}}return St.HitCanvas=v,St}var un={},fr;function Hn(){return fr||(fr=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=st(),n=ct();t.DD={get isDragging(){let i=!1;return t.DD._dragElements.forEach(l=>{l.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){let i;return t.DD._dragElements.forEach(l=>{i=l.node}),i},_dragElements:new Map,_drag(i){const l=[];t.DD._dragElements.forEach((r,h)=>{const{node:f}=r,p=f.getStage();p.setPointersPositions(i),r.pointerId===void 0&&(r.pointerId=n.Util._getFirstPointerId(i));const v=p._changedPointerPositions.find(b=>b.id===r.pointerId);if(v){if(r.dragStatus!=="dragging"){const b=f.dragDistance();if(Math.max(Math.abs(v.x-r.startPointerPos.x),Math.abs(v.y-r.startPointerPos.y))<b||(f.startDrag({evt:i}),!f.isDragging()))return}f._setDragPosition(i,r),l.push(f)}}),l.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:i},!0)})},_endDragBefore(i){const l=[];t.DD._dragElements.forEach(r=>{const{node:h}=r,f=h.getStage();if(i&&f.setPointersPositions(i),!f._changedPointerPositions.find(b=>b.id===r.pointerId))return;(r.dragStatus==="dragging"||r.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,r.dragStatus="stopped");const v=r.node.getLayer()||r.node instanceof e.Konva.Stage&&r.node;v&&l.indexOf(v)===-1&&l.push(v)}),l.forEach(r=>{r.draw()})},_endDragAfter(i){t.DD._dragElements.forEach((l,r)=>{l.dragStatus==="stopped"&&l.node.fire("dragend",{type:"dragend",target:l.node,evt:i},!0),l.dragStatus!=="dragging"&&t.DD._dragElements.delete(r)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))}(un)),un}var gr;function De(){if(gr)return fe;gr=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.Node=void 0;const t=ct(),e=Wt(),n=tn(),i=st(),l=Hn(),r=zt(),h="absoluteOpacity",f="allEventListeners",p="absoluteTransform",v="absoluteScale",b="canvas",x="Change",w="children",y="konva",d="listening",c="mouseenter",S="mouseleave",R="set",o="Shape",s=" ",u="stage",m="transform",k="Stage",D="visible",C=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(s);let G=1;class E{constructor(a){this._id=G++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(a),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(a){(a===m||a===p)&&this._cache.get(a)?this._cache.get(a).dirty=!0:a?this._cache.delete(a):this._cache.clear()}_getCache(a,g){let _=this._cache.get(a);return(_===void 0||(a===m||a===p)&&_.dirty===!0)&&(_=g.call(this),this._cache.set(a,_)),_}_calculate(a,g,_){if(!this._attachedDepsListeners.get(a)){const A=g.map(T=>T+"Change.konva").join(s);this.on(A,()=>{this._clearCache(a)}),this._attachedDepsListeners.set(a,!0)}return this._getCache(a,_)}_getCanvasCache(){return this._cache.get(b)}_clearSelfAndDescendantCache(a){this._clearCache(a),a===p&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(b)){const{scene:a,filter:g,hit:_}=this._cache.get(b);t.Util.releaseCanvas(a,g,_),this._cache.delete(b)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(a){const g=a||{};let _={};(g.x===void 0||g.y===void 0||g.width===void 0||g.height===void 0)&&(_=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let A=Math.ceil(g.width||_.width),T=Math.ceil(g.height||_.height),F=g.pixelRatio,I=g.x===void 0?Math.floor(_.x):g.x,M=g.y===void 0?Math.floor(_.y):g.y,B=g.offset||0,H=g.drawBorder||!1,J=g.hitCanvasPixelRatio||1;if(!A||!T){t.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const tt=Math.abs(Math.round(_.x)-I)>.5?1:0,ht=Math.abs(Math.round(_.y)-M)>.5?1:0;A+=B*2+tt,T+=B*2+ht,I-=B,M-=B;const nt=new n.SceneCanvas({pixelRatio:F,width:A,height:T}),P=new n.SceneCanvas({pixelRatio:F,width:0,height:0,willReadFrequently:!0}),L=new n.HitCanvas({pixelRatio:J,width:A,height:T}),U=nt.getContext(),j=L.getContext();return L.isCache=!0,nt.isCache=!0,this._cache.delete(b),this._filterUpToDate=!1,g.imageSmoothingEnabled===!1&&(nt.getContext()._context.imageSmoothingEnabled=!1,P.getContext()._context.imageSmoothingEnabled=!1),U.save(),j.save(),U.translate(-I,-M),j.translate(-I,-M),this._isUnderCache=!0,this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(v),this.drawScene(nt,this),this.drawHit(L,this),this._isUnderCache=!1,U.restore(),j.restore(),H&&(U.save(),U.beginPath(),U.rect(0,0,A,T),U.closePath(),U.setAttr("strokeStyle","red"),U.setAttr("lineWidth",5),U.stroke(),U.restore()),this._cache.set(b,{scene:nt,filter:P,hit:L,x:I,y:M}),this._requestDraw(),this}isCached(){return this._cache.has(b)}getClientRect(a){throw new Error('abstract "getClientRect" method call')}_transformedRect(a,g){const _=[{x:a.x,y:a.y},{x:a.x+a.width,y:a.y},{x:a.x+a.width,y:a.y+a.height},{x:a.x,y:a.y+a.height}];let A=1/0,T=1/0,F=-1/0,I=-1/0;const M=this.getAbsoluteTransform(g);return _.forEach(function(B){const H=M.point(B);A===void 0&&(A=F=H.x,T=I=H.y),A=Math.min(A,H.x),T=Math.min(T,H.y),F=Math.max(F,H.x),I=Math.max(I,H.y)}),{x:A,y:T,width:F-A,height:I-T}}_drawCachedSceneCanvas(a){a.save(),a._applyOpacity(this),a._applyGlobalCompositeOperation(this);const g=this._getCanvasCache();a.translate(g.x,g.y);const _=this._getCachedSceneCanvas(),A=_.pixelRatio;a.drawImage(_._canvas,0,0,_.width/A,_.height/A),a.restore()}_drawCachedHitCanvas(a){const g=this._getCanvasCache(),_=g.hit;a.save(),a.translate(g.x,g.y),a.drawImage(_._canvas,0,0,_.width/_.pixelRatio,_.height/_.pixelRatio),a.restore()}_getCachedSceneCanvas(){let a=this.filters(),g=this._getCanvasCache(),_=g.scene,A=g.filter,T=A.getContext(),F,I,M,B;if(a){if(!this._filterUpToDate){const H=_.pixelRatio;A.setSize(_.width/_.pixelRatio,_.height/_.pixelRatio);try{for(F=a.length,T.clear(),T.drawImage(_._canvas,0,0,_.getWidth()/H,_.getHeight()/H),I=T.getImageData(0,0,A.getWidth(),A.getHeight()),M=0;M<F;M++){if(B=a[M],typeof B!="function"){t.Util.error("Filter should be type of function, but got "+typeof B+" instead. Please check correct filters");continue}B.call(this,I),T.putImageData(I,0,0)}}catch(J){t.Util.error("Unable to apply filter. "+J.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return A}return _}on(a,g){if(this._cache&&this._cache.delete(f),arguments.length===3)return this._delegate.apply(this,arguments);let _=a.split(s),A=_.length,T,F,I,M,B;for(T=0;T<A;T++)F=_[T],I=F.split("."),M=I[0],B=I[1]||"",this.eventListeners[M]||(this.eventListeners[M]=[]),this.eventListeners[M].push({name:B,handler:g});return this}off(a,g){let _=(a||"").split(s),A=_.length,T,F,I,M,B,H;if(this._cache&&this._cache.delete(f),!a)for(F in this.eventListeners)this._off(F);for(T=0;T<A;T++)if(I=_[T],M=I.split("."),B=M[0],H=M[1],B)this.eventListeners[B]&&this._off(B,H,g);else for(F in this.eventListeners)this._off(F,H,g);return this}dispatchEvent(a){const g={target:this,type:a.type,evt:a};return this.fire(a.type,g),this}addEventListener(a,g){return this.on(a,function(_){g.call(this,_.evt)}),this}removeEventListener(a){return this.off(a),this}_delegate(a,g,_){const A=this;this.on(a,function(T){const F=T.target.findAncestors(g,!0,A);for(let I=0;I<F.length;I++)T=t.Util.cloneObject(T),T.currentTarget=F[I],_.call(F[I],T)})}remove(){return this.isDragging()&&this.stopDrag(),l.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(D),this._clearSelfAndDescendantCache(d)}_remove(){this._clearCaches();const a=this.getParent();a&&a.children&&(a.children.splice(this.index,1),a._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(a){const g="get"+t.Util._capitalize(a);return t.Util._isFunction(this[g])?this[g]():this.attrs[a]}getAncestors(){let a=this.getParent(),g=[];for(;a;)g.push(a),a=a.getParent();return g}getAttrs(){return this.attrs||{}}setAttrs(a){return this._batchTransformChanges(()=>{let g,_;if(!a)return this;for(g in a)g!==w&&(_=R+t.Util._capitalize(g),t.Util._isFunction(this[_])?this[_](a[g]):this._setAttr(g,a[g]))}),this}isListening(){return this._getCache(d,this._isListening)}_isListening(a){if(!this.listening())return!1;const _=this.getParent();return _&&_!==a&&this!==a?_._isListening(a):!0}isVisible(){return this._getCache(D,this._isVisible)}_isVisible(a){if(!this.visible())return!1;const _=this.getParent();return _&&_!==a&&this!==a?_._isVisible(a):!0}shouldDrawHit(a,g=!1){if(a)return this._isVisible(a)&&this._isListening(a);const _=this.getLayer();let A=!1;l.DD._dragElements.forEach(F=>{F.dragStatus==="dragging"&&(F.node.nodeType==="Stage"||F.node.getLayer()===_)&&(A=!0)});const T=!g&&!i.Konva.hitOnDragEnabled&&(A||i.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!T}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let a=this.getDepth(),g=this,_=0,A,T,F,I;function M(H){for(A=[],T=H.length,F=0;F<T;F++)I=H[F],_++,I.nodeType!==o&&(A=A.concat(I.getChildren().slice())),I._id===g._id&&(F=T);A.length>0&&A[0].getDepth()<=a&&M(A)}const B=this.getStage();return g.nodeType!==k&&B&&M(B.getChildren()),_}getDepth(){let a=0,g=this.parent;for(;g;)a++,g=g.parent;return a}_batchTransformChanges(a){this._batchingTransformChange=!0,a(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(m),this._clearSelfAndDescendantCache(p)),this._needClearTransformCache=!1}setPosition(a){return this._batchTransformChanges(()=>{this.x(a.x),this.y(a.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const a=this.getStage();if(!a)return null;const g=a.getPointerPosition();if(!g)return null;const _=this.getAbsoluteTransform().copy();return _.invert(),_.point(g)}getAbsolutePosition(a){let g=!1,_=this.parent;for(;_;){if(_.isCached()){g=!0;break}_=_.parent}g&&!a&&(a=!0);const A=this.getAbsoluteTransform(a).getMatrix(),T=new t.Transform,F=this.offset();return T.m=A.slice(),T.translate(F.x,F.y),T.getTranslation()}setAbsolutePosition(a){const{x:g,y:_,...A}=this._clearTransform();this.attrs.x=g,this.attrs.y=_,this._clearCache(m);const T=this._getAbsoluteTransform().copy();return T.invert(),T.translate(a.x,a.y),a={x:this.attrs.x+T.getTranslation().x,y:this.attrs.y+T.getTranslation().y},this._setTransform(A),this.setPosition({x:a.x,y:a.y}),this._clearCache(m),this._clearSelfAndDescendantCache(p),this}_setTransform(a){let g;for(g in a)this.attrs[g]=a[g]}_clearTransform(){const a={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,a}move(a){let g=a.x,_=a.y,A=this.x(),T=this.y();return g!==void 0&&(A+=g),_!==void 0&&(T+=_),this.setPosition({x:A,y:T}),this}_eachAncestorReverse(a,g){let _=[],A=this.getParent(),T,F;if(!(g&&g._id===this._id)){for(_.unshift(this);A&&(!g||A._id!==g._id);)_.unshift(A),A=A.parent;for(T=_.length,F=0;F<T;F++)a(_[F])}}rotate(a){return this.rotation(this.rotation()+a),this}moveToTop(){if(!this.parent)return t.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const a=this.index,g=this.parent.getChildren().length;return a<g-1?(this.parent.children.splice(a,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return t.Util.warn("Node has no parent. moveUp function is ignored."),!1;const a=this.index,g=this.parent.getChildren().length;return a<g-1?(this.parent.children.splice(a,1),this.parent.children.splice(a+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return t.Util.warn("Node has no parent. moveDown function is ignored."),!1;const a=this.index;return a>0?(this.parent.children.splice(a,1),this.parent.children.splice(a-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return t.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const a=this.index;return a>0?(this.parent.children.splice(a,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(a){if(!this.parent)return t.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(a<0||a>=this.parent.children.length)&&t.Util.warn("Unexpected value "+a+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const g=this.index;return this.parent.children.splice(g,1),this.parent.children.splice(a,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(h,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let a=this.opacity();const g=this.getParent();return g&&!g._isUnderCache&&(a*=g.getAbsoluteOpacity()),a}moveTo(a){return this.getParent()!==a&&(this._remove(),a.add(this)),this}toObject(){let a=this.getAttrs(),g,_,A,T,F;const I={attrs:{},className:this.getClassName()};for(g in a)_=a[g],F=t.Util.isObject(_)&&!t.Util._isPlainObject(_)&&!t.Util._isArray(_),!F&&(A=typeof this[g]=="function"&&this[g],delete a[g],T=A?A.call(this):null,a[g]=_,T!==_&&(I.attrs[g]=_));return t.Util._prepareToStringify(I)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(a,g,_){const A=[];g&&this._isMatch(a)&&A.push(this);let T=this.parent;for(;T;){if(T===_)return A;T._isMatch(a)&&A.push(T),T=T.parent}return A}isAncestorOf(a){return!1}findAncestor(a,g,_){return this.findAncestors(a,g,_)[0]}_isMatch(a){if(!a)return!1;if(typeof a=="function")return a(this);let g=a.replace(/ /g,"").split(","),_=g.length,A,T;for(A=0;A<_;A++)if(T=g[A],t.Util.isValidSelector(T)||(t.Util.warn('Selector "'+T+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),t.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),t.Util.warn("Konva is awesome, right?")),T.charAt(0)==="#"){if(this.id()===T.slice(1))return!0}else if(T.charAt(0)==="."){if(this.hasName(T.slice(1)))return!0}else if(this.className===T||this.nodeType===T)return!0;return!1}getLayer(){const a=this.getParent();return a?a.getLayer():null}getStage(){return this._getCache(u,this._getStage)}_getStage(){const a=this.getParent();return a?a.getStage():null}fire(a,g={},_){return g.target=g.target||this,_?this._fireAndBubble(a,g):this._fire(a,g),this}getAbsoluteTransform(a){return a?this._getAbsoluteTransform(a):this._getCache(p,this._getAbsoluteTransform)}_getAbsoluteTransform(a){let g;if(a)return g=new t.Transform,this._eachAncestorReverse(function(_){const A=_.transformsEnabled();A==="all"?g.multiply(_.getTransform()):A==="position"&&g.translate(_.x()-_.offsetX(),_.y()-_.offsetY())},a),g;{g=this._cache.get(p)||new t.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(g):g.reset();const _=this.transformsEnabled();if(_==="all")g.multiply(this.getTransform());else if(_==="position"){const A=this.attrs.x||0,T=this.attrs.y||0,F=this.attrs.offsetX||0,I=this.attrs.offsetY||0;g.translate(A-F,T-I)}return g.dirty=!1,g}}getAbsoluteScale(a){let g=this;for(;g;)g._isUnderCache&&(a=g),g=g.getParent();const A=this.getAbsoluteTransform(a).decompose();return{x:A.scaleX,y:A.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(m,this._getTransform)}_getTransform(){var a,g;const _=this._cache.get(m)||new t.Transform;_.reset();const A=this.x(),T=this.y(),F=i.Konva.getAngle(this.rotation()),I=(a=this.attrs.scaleX)!==null&&a!==void 0?a:1,M=(g=this.attrs.scaleY)!==null&&g!==void 0?g:1,B=this.attrs.skewX||0,H=this.attrs.skewY||0,J=this.attrs.offsetX||0,tt=this.attrs.offsetY||0;return(A!==0||T!==0)&&_.translate(A,T),F!==0&&_.rotate(F),(B!==0||H!==0)&&_.skew(B,H),(I!==1||M!==1)&&_.scale(I,M),(J!==0||tt!==0)&&_.translate(-1*J,-1*tt),_.dirty=!1,_}clone(a){let g=t.Util.cloneObject(this.attrs),_,A,T,F,I;for(_ in a)g[_]=a[_];const M=new this.constructor(g);for(_ in this.eventListeners)for(A=this.eventListeners[_],T=A.length,F=0;F<T;F++)I=A[F],I.name.indexOf(y)<0&&(M.eventListeners[_]||(M.eventListeners[_]=[]),M.eventListeners[_].push(I));return M}_toKonvaCanvas(a){a=a||{};const g=this.getClientRect(),_=this.getStage(),A=a.x!==void 0?a.x:Math.floor(g.x),T=a.y!==void 0?a.y:Math.floor(g.y),F=a.pixelRatio||1,I=new n.SceneCanvas({width:a.width||Math.ceil(g.width)||(_?_.width():0),height:a.height||Math.ceil(g.height)||(_?_.height():0),pixelRatio:F}),M=I.getContext(),B=new n.SceneCanvas({width:I.width/I.pixelRatio+Math.abs(A),height:I.height/I.pixelRatio+Math.abs(T),pixelRatio:I.pixelRatio});return a.imageSmoothingEnabled===!1&&(M._context.imageSmoothingEnabled=!1),M.save(),(A||T)&&M.translate(-1*A,-1*T),this.drawScene(I,void 0,B),M.restore(),I}toCanvas(a){return this._toKonvaCanvas(a)._canvas}toDataURL(a){a=a||{};const g=a.mimeType||null,_=a.quality||null,A=this._toKonvaCanvas(a).toDataURL(g,_);return a.callback&&a.callback(A),A}toImage(a){return new Promise((g,_)=>{try{const A=a==null?void 0:a.callback;A&&delete a.callback,t.Util._urlToImage(this.toDataURL(a),function(T){g(T),A==null||A(T)})}catch(A){_(A)}})}toBlob(a){return new Promise((g,_)=>{try{const A=a==null?void 0:a.callback;A&&delete a.callback,this.toCanvas(a).toBlob(T=>{g(T),A==null||A(T)},a==null?void 0:a.mimeType,a==null?void 0:a.quality)}catch(A){_(A)}})}setSize(a){return this.width(a.width),this.height(a.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():i.Konva.dragDistance}_off(a,g,_){let A=this.eventListeners[a],T,F,I;for(T=0;T<A.length;T++)if(F=A[T].name,I=A[T].handler,(F!=="konva"||g==="konva")&&(!g||F===g)&&(!_||_===I)){if(A.splice(T,1),A.length===0){delete this.eventListeners[a];break}T--}}_fireChangeEvent(a,g,_){this._fire(a+x,{oldVal:g,newVal:_})}addName(a){if(!this.hasName(a)){const g=this.name(),_=g?g+" "+a:a;this.name(_)}return this}hasName(a){if(!a)return!1;const g=this.name();return g?(g||"").split(/\s/g).indexOf(a)!==-1:!1}removeName(a){const g=(this.name()||"").split(/\s/g),_=g.indexOf(a);return _!==-1&&(g.splice(_,1),this.name(g.join(" "))),this}setAttr(a,g){const _=this[R+t.Util._capitalize(a)];return t.Util._isFunction(_)?_.call(this,g):this._setAttr(a,g),this}_requestDraw(){if(i.Konva.autoDrawEnabled){const a=this.getLayer()||this.getStage();a==null||a.batchDraw()}}_setAttr(a,g){const _=this.attrs[a];_===g&&!t.Util.isObject(g)||(g==null?delete this.attrs[a]:this.attrs[a]=g,this._shouldFireChangeEvents&&this._fireChangeEvent(a,_,g),this._requestDraw())}_setComponentAttr(a,g,_){let A;_!==void 0&&(A=this.attrs[a],A||(this.attrs[a]=this.getAttr(a)),this.attrs[a][g]=_,this._fireChangeEvent(a,A,_))}_fireAndBubble(a,g,_){if(g&&this.nodeType===o&&(g.target=this),!((a===c||a===S)&&(_&&(this===_||this.isAncestorOf&&this.isAncestorOf(_))||this.nodeType==="Stage"&&!_))){this._fire(a,g);const T=(a===c||a===S)&&_&&_.isAncestorOf&&_.isAncestorOf(this)&&!_.isAncestorOf(this.parent);(g&&!g.cancelBubble||!g)&&this.parent&&this.parent.isListening()&&!T&&(_&&_.parent?this._fireAndBubble.call(this.parent,a,g,_):this._fireAndBubble.call(this.parent,a,g))}}_getProtoListeners(a){var g,_,A;const T=(g=this._cache.get(f))!==null&&g!==void 0?g:{};let F=T==null?void 0:T[a];if(F===void 0){F=[];let I=Object.getPrototypeOf(this);for(;I;){const M=(A=(_=I.eventListeners)===null||_===void 0?void 0:_[a])!==null&&A!==void 0?A:[];F.push(...M),I=Object.getPrototypeOf(I)}T[a]=F,this._cache.set(f,T)}return F}_fire(a,g){g=g||{},g.currentTarget=this,g.type=a;const _=this._getProtoListeners(a);if(_)for(var A=0;A<_.length;A++)_[A].handler.call(this,g);const T=this.eventListeners[a];if(T)for(var A=0;A<T.length;A++)T[A].handler.call(this,g)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(a){const g=a?a.pointerId:void 0,_=this.getStage(),A=this.getAbsolutePosition();if(!_)return;const T=_._getPointerById(g)||_._changedPointerPositions[0]||A;l.DD._dragElements.set(this._id,{node:this,startPointerPos:T,offset:{x:T.x-A.x,y:T.y-A.y},dragStatus:"ready",pointerId:g})}startDrag(a,g=!0){l.DD._dragElements.has(this._id)||this._createDragElement(a);const _=l.DD._dragElements.get(this._id);_.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:a&&a.evt},g)}_setDragPosition(a,g){const _=this.getStage()._getPointerById(g.pointerId);if(!_)return;let A={x:_.x-g.offset.x,y:_.y-g.offset.y};const T=this.dragBoundFunc();if(T!==void 0){const F=T.call(this,A,a);F?A=F:t.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==A.x||this._lastPos.y!==A.y)&&(this.setAbsolutePosition(A),this._requestDraw()),this._lastPos=A}stopDrag(a){const g=l.DD._dragElements.get(this._id);g&&(g.dragStatus="stopped"),l.DD._endDragBefore(a),l.DD._endDragAfter(a)}setDraggable(a){this._setAttr("draggable",a),this._dragChange()}isDragging(){const a=l.DD._dragElements.get(this._id);return a?a.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(a){if(!(!(a.evt.button!==void 0)||i.Konva.dragButtons.indexOf(a.evt.button)>=0)||this.isDragging())return;let A=!1;l.DD._dragElements.forEach(T=>{this.isAncestorOf(T.node)&&(A=!0)}),A||this._createDragElement(a)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const g=l.DD._dragElements.get(this._id),_=g&&g.dragStatus==="dragging",A=g&&g.dragStatus==="ready";_?this.stopDrag():A&&l.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(a={x:0,y:0}){const g=this.getStage();if(!g)return!1;const _={x:-a.x,y:-a.y,width:g.width()+2*a.x,height:g.height()+2*a.y};return t.Util.haveIntersection(_,this.getClientRect())}static create(a,g){return t.Util._isString(a)&&(a=JSON.parse(a)),this._createNode(a,g)}static _createNode(a,g){let _=E.prototype.getClassName.call(a),A=a.children,T,F,I;g&&(a.attrs.container=g),i.Konva[_]||(t.Util.warn('Can not find a node with class name "'+_+'". Fallback to "Shape".'),_="Shape");const M=i.Konva[_];if(T=new M(a.attrs),A)for(F=A.length,I=0;I<F;I++)T.add(E._createNode(A[I]));return T}}fe.Node=E,E.prototype.nodeType="Node",E.prototype._attrsAffectingSize=[],E.prototype.eventListeners={},E.prototype.on.call(E.prototype,C,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(m),this._clearSelfAndDescendantCache(p)}),E.prototype.on.call(E.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(D)}),E.prototype.on.call(E.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(d)}),E.prototype.on.call(E.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(h)});const O=e.Factory.addGetterSetter;return O(E,"zIndex"),O(E,"absolutePosition"),O(E,"position"),O(E,"x",0,(0,r.getNumberValidator)()),O(E,"y",0,(0,r.getNumberValidator)()),O(E,"globalCompositeOperation","source-over",(0,r.getStringValidator)()),O(E,"opacity",1,(0,r.getNumberValidator)()),O(E,"name","",(0,r.getStringValidator)()),O(E,"id","",(0,r.getStringValidator)()),O(E,"rotation",0,(0,r.getNumberValidator)()),e.Factory.addComponentsGetterSetter(E,"scale",["x","y"]),O(E,"scaleX",1,(0,r.getNumberValidator)()),O(E,"scaleY",1,(0,r.getNumberValidator)()),e.Factory.addComponentsGetterSetter(E,"skew",["x","y"]),O(E,"skewX",0,(0,r.getNumberValidator)()),O(E,"skewY",0,(0,r.getNumberValidator)()),e.Factory.addComponentsGetterSetter(E,"offset",["x","y"]),O(E,"offsetX",0,(0,r.getNumberValidator)()),O(E,"offsetY",0,(0,r.getNumberValidator)()),O(E,"dragDistance",void 0,(0,r.getNumberValidator)()),O(E,"width",0,(0,r.getNumberValidator)()),O(E,"height",0,(0,r.getNumberValidator)()),O(E,"listening",!0,(0,r.getBooleanValidator)()),O(E,"preventDefault",!0,(0,r.getBooleanValidator)()),O(E,"filters",void 0,function(N){return this._filterUpToDate=!1,N}),O(E,"visible",!0,(0,r.getBooleanValidator)()),O(E,"transformsEnabled","all",(0,r.getStringValidator)()),O(E,"size"),O(E,"dragBoundFunc"),O(E,"draggable",!1,(0,r.getBooleanValidator)()),e.Factory.backCompat(E,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),fe}var Gt={},pr;function mi(){if(pr)return Gt;pr=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.getCapturedShape=i,Gt.createEvent=l,Gt.hasPointerCapture=r,Gt.setPointerCapture=h,Gt.releaseCapture=f;const t=st(),e=new Map,n=t.Konva._global.PointerEvent!==void 0;function i(p){return e.get(p)}function l(p){return{evt:p,pointerId:p.pointerId}}function r(p,v){return e.get(p)===v}function h(p,v){f(p),v.getStage()&&(e.set(p,v),n&&v._fire("gotpointercapture",l(new PointerEvent("gotpointercapture"))))}function f(p,v){const b=e.get(p);if(!b)return;const x=b.getStage();x&&x.content,e.delete(p),n&&b._fire("lostpointercapture",l(new PointerEvent("lostpointercapture")))}return Gt}var _r;function en(){return _r||(_r=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=st(),n=ct(),i=Wt(),l=De(),r=zt(),h=st(),f=mi(),p="hasShadow",v="shadowRGBA",b="patternImage",x="linearGradient",w="radialGradient";let y;function d(){return y||(y=n.Util.createCanvasElement().getContext("2d"),y)}t.shapes={};function c(G){const E=this.attrs.fillRule;E?G.fill(E):G.fill()}function S(G){G.stroke()}function R(G){const E=this.attrs.fillRule;E?G.fill(E):G.fill()}function o(G){G.stroke()}function s(){this._clearCache(p)}function u(){this._clearCache(v)}function m(){this._clearCache(b)}function k(){this._clearCache(x)}function D(){this._clearCache(w)}class C extends l.Node{constructor(E){super(E);let O;for(;O=n.Util.getRandomColor(),!(O&&!(O in t.shapes)););this.colorKey=O,t.shapes[O]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(p,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(b,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const O=d().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(O&&O.setTransform){const N=new n.Transform;N.translate(this.fillPatternX(),this.fillPatternY()),N.rotate(e.Konva.getAngle(this.fillPatternRotation())),N.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),N.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const a=N.getMatrix(),g=typeof DOMMatrix>"u"?{a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]}:new DOMMatrix(a);O.setTransform(g)}return O}}_getLinearGradient(){return this._getCache(x,this.__getLinearGradient)}__getLinearGradient(){const E=this.fillLinearGradientColorStops();if(E){const O=d(),N=this.fillLinearGradientStartPoint(),a=this.fillLinearGradientEndPoint(),g=O.createLinearGradient(N.x,N.y,a.x,a.y);for(let _=0;_<E.length;_+=2)g.addColorStop(E[_],E[_+1]);return g}}_getRadialGradient(){return this._getCache(w,this.__getRadialGradient)}__getRadialGradient(){const E=this.fillRadialGradientColorStops();if(E){const O=d(),N=this.fillRadialGradientStartPoint(),a=this.fillRadialGradientEndPoint(),g=O.createRadialGradient(N.x,N.y,this.fillRadialGradientStartRadius(),a.x,a.y,this.fillRadialGradientEndRadius());for(let _=0;_<E.length;_+=2)g.addColorStop(E[_],E[_+1]);return g}}getShadowRGBA(){return this._getCache(v,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const E=n.Util.colorToRGBA(this.shadowColor());if(E)return"rgba("+E.r+","+E.g+","+E.b+","+E.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const E=this.hitStrokeWidth();return E==="auto"?this.hasStroke():this.strokeEnabled()&&!!E}intersects(E){const O=this.getStage();if(!O)return!1;const N=O.bufferHitCanvas;return N.getContext().clear(),this.drawHit(N,void 0,!0),N.context.getImageData(Math.round(E.x),Math.round(E.y),1,1).data[3]>0}destroy(){return l.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(E){var O;if(!((O=this.attrs.perfectDrawEnabled)!==null&&O!==void 0?O:!0))return!1;const a=E||this.hasFill(),g=this.hasStroke(),_=this.getAbsoluteOpacity()!==1;if(a&&g&&_)return!0;const A=this.hasShadow(),T=this.shadowForStrokeEnabled();return!!(a&&g&&A&&T)}setStrokeHitEnabled(E){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),E?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const E=this.size();return{x:this._centroid?-E.width/2:0,y:this._centroid?-E.height/2:0,width:E.width,height:E.height}}getClientRect(E={}){let O=!1,N=this.getParent();for(;N;){if(N.isCached()){O=!0;break}N=N.getParent()}const a=E.skipTransform,g=E.relativeTo||O&&this.getStage()||void 0,_=this.getSelfRect(),T=!E.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,F=_.width+T,I=_.height+T,M=!E.skipShadow&&this.hasShadow(),B=M?this.shadowOffsetX():0,H=M?this.shadowOffsetY():0,J=F+Math.abs(B),tt=I+Math.abs(H),ht=M&&this.shadowBlur()||0,nt=J+ht*2,P=tt+ht*2,L={width:nt,height:P,x:-(T/2+ht)+Math.min(B,0)+_.x,y:-(T/2+ht)+Math.min(H,0)+_.y};return a?L:this._transformedRect(L,g)}drawScene(E,O,N){const a=this.getLayer();let g=E||a.getCanvas(),_=g.getContext(),A=this._getCanvasCache(),T=this.getSceneFunc(),F=this.hasShadow(),I,M;const B=g.isCache,H=O===this;if(!this.isVisible()&&!H)return this;if(A){_.save();const tt=this.getAbsoluteTransform(O).getMatrix();return _.transform(tt[0],tt[1],tt[2],tt[3],tt[4],tt[5]),this._drawCachedSceneCanvas(_),_.restore(),this}if(!T)return this;if(_.save(),this._useBufferCanvas()&&!B){I=this.getStage();const tt=N||I.bufferCanvas;M=tt.getContext(),M.clear(),M.save(),M._applyLineJoin(this);var J=this.getAbsoluteTransform(O).getMatrix();M.transform(J[0],J[1],J[2],J[3],J[4],J[5]),T.call(this,M,this),M.restore();const ht=tt.pixelRatio;F&&_._applyShadow(this),_._applyOpacity(this),_._applyGlobalCompositeOperation(this),_.drawImage(tt._canvas,0,0,tt.width/ht,tt.height/ht)}else{if(_._applyLineJoin(this),!H){var J=this.getAbsoluteTransform(O).getMatrix();_.transform(J[0],J[1],J[2],J[3],J[4],J[5]),_._applyOpacity(this),_._applyGlobalCompositeOperation(this)}F&&_._applyShadow(this),T.call(this,_,this)}return _.restore(),this}drawHit(E,O,N=!1){if(!this.shouldDrawHit(O,N))return this;const a=this.getLayer(),g=E||a.hitCanvas,_=g&&g.getContext(),A=this.hitFunc()||this.sceneFunc(),T=this._getCanvasCache(),F=T&&T.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),F){_.save();const M=this.getAbsoluteTransform(O).getMatrix();return _.transform(M[0],M[1],M[2],M[3],M[4],M[5]),this._drawCachedHitCanvas(_),_.restore(),this}if(!A)return this;if(_.save(),_._applyLineJoin(this),!(this===O)){const M=this.getAbsoluteTransform(O).getMatrix();_.transform(M[0],M[1],M[2],M[3],M[4],M[5])}return A.call(this,_,this),_.restore(),this}drawHitFromCache(E=0){const O=this._getCanvasCache(),N=this._getCachedSceneCanvas(),a=O.hit,g=a.getContext(),_=a.getWidth(),A=a.getHeight();g.clear(),g.drawImage(N._canvas,0,0,_,A);try{const T=g.getImageData(0,0,_,A),F=T.data,I=F.length,M=n.Util._hexToRgb(this.colorKey);for(let B=0;B<I;B+=4)F[B+3]>E?(F[B]=M.r,F[B+1]=M.g,F[B+2]=M.b,F[B+3]=255):F[B+3]=0;g.putImageData(T,0,0)}catch(T){n.Util.error("Unable to draw hit graph from cached scene canvas. "+T.message)}return this}hasPointerCapture(E){return f.hasPointerCapture(E,this)}setPointerCapture(E){f.setPointerCapture(E,this)}releaseCapture(E){f.releaseCapture(E,this)}}t.Shape=C,C.prototype._fillFunc=c,C.prototype._strokeFunc=S,C.prototype._fillFuncHit=R,C.prototype._strokeFuncHit=o,C.prototype._centroid=!1,C.prototype.nodeType="Shape",(0,h._registerNode)(C),C.prototype.eventListeners={},C.prototype.on.call(C.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",s),C.prototype.on.call(C.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",u),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",m),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",k),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",D),i.Factory.addGetterSetter(C,"stroke",void 0,(0,r.getStringOrGradientValidator)()),i.Factory.addGetterSetter(C,"strokeWidth",2,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(C,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(C,"hitStrokeWidth","auto",(0,r.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(C,"strokeHitEnabled",!0,(0,r.getBooleanValidator)()),i.Factory.addGetterSetter(C,"perfectDrawEnabled",!0,(0,r.getBooleanValidator)()),i.Factory.addGetterSetter(C,"shadowForStrokeEnabled",!0,(0,r.getBooleanValidator)()),i.Factory.addGetterSetter(C,"lineJoin"),i.Factory.addGetterSetter(C,"lineCap"),i.Factory.addGetterSetter(C,"sceneFunc"),i.Factory.addGetterSetter(C,"hitFunc"),i.Factory.addGetterSetter(C,"dash"),i.Factory.addGetterSetter(C,"dashOffset",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(C,"shadowColor",void 0,(0,r.getStringValidator)()),i.Factory.addGetterSetter(C,"shadowBlur",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(C,"shadowOpacity",1,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(C,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(C,"shadowOffsetX",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(C,"shadowOffsetY",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(C,"fillPatternImage"),i.Factory.addGetterSetter(C,"fill",void 0,(0,r.getStringOrGradientValidator)()),i.Factory.addGetterSetter(C,"fillPatternX",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(C,"fillPatternY",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(C,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(C,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(C,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(C,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(C,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(C,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(C,"fillEnabled",!0),i.Factory.addGetterSetter(C,"strokeEnabled",!0),i.Factory.addGetterSetter(C,"shadowEnabled",!0),i.Factory.addGetterSetter(C,"dashEnabled",!0),i.Factory.addGetterSetter(C,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(C,"fillPriority","color"),i.Factory.addComponentsGetterSetter(C,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(C,"fillPatternOffsetX",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(C,"fillPatternOffsetY",0,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(C,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(C,"fillPatternScaleX",1,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(C,"fillPatternScaleY",1,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(C,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(C,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(C,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(C,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(C,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(C,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(C,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(C,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(C,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(C,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(C,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(C,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(C,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(C,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(C,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(C,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(C,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(C,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(C,"fillPatternRotation",0),i.Factory.addGetterSetter(C,"fillRule",void 0,(0,r.getStringValidator)()),i.Factory.backCompat(C,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(hn)),hn}const ia=["mouseover","mouseout","mouseenter","mouseleave","mousemove","mousedown","mouseup","wheel","click","dblclick","touchstart","touchmove","touchend","tap","dbltap","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerenter","pointerout","pointerleave","pointerclick","pointerdblclick","dragstart","dragmove","dragend","transformstart","transform","transformend"];function nn(t,e){ia.forEach(n=>{const i=t[`on${n}`];typeof i=="function"&&e.on(n,l=>{i(l)})})}const Ke=["svelte-konva-stage","svelte-konva-layer","svelte-konva-group","svelte-konva-label"];var Pe;(function(t){t[t.Stage=0]="Stage",t[t.Layer=1]="Layer",t[t.Group=2]="Group",t[t.Label=3]="Label"})(Pe||(Pe={}));const sa="svelte-konva: Component does not have any parent container. Please make sure that the component is wrapped inside a Layer or Group.",aa="svelte-konva: A Layer needs to have a Stage as parent.";function yi(t,e){Ke.forEach(n=>{zn(n,null)}),zn(Ke[t],e)}function bi(){for(let t=1;t<4;t++){const e=Mr(Ke[t]);if(e)return e}throw new Error(sa)}function oa(){const t=Mr(Ke[Pe.Stage]);if(t)return t;throw new Error(aa)}var Ge={exports:{}},dn={},ge={},vr;function rn(){if(vr)return ge;vr=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.Container=void 0;const t=Wt(),e=De(),n=zt();let i=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(r){if(!r)return this.children||[];const h=this.children||[],f=[];return h.forEach(function(p){r(p)&&f.push(p)}),f}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(r=>{r.parent=null,r.index=0,r.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(r=>{r.parent=null,r.index=0,r.destroy()}),this.children=[],this._requestDraw(),this}add(...r){if(r.length===0)return this;if(r.length>1){for(let f=0;f<r.length;f++)this.add(r[f]);return this}const h=r[0];return h.getParent()?(h.moveTo(this),this):(this._validateAdd(h),h.index=this.getChildren().length,h.parent=this,h._clearCaches(),this.getChildren().push(h),this._fire("add",{child:h}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(r){return this._generalFind(r,!1)}findOne(r){const h=this._generalFind(r,!0);return h.length>0?h[0]:void 0}_generalFind(r,h){const f=[];return this._descendants(p=>{const v=p._isMatch(r);return v&&f.push(p),!!(v&&h)}),f}_descendants(r){let h=!1;const f=this.getChildren();for(const p of f){if(h=r(p),h)return!0;if(p.hasChildren()&&(h=p._descendants(r),h))return!0}return!1}toObject(){const r=e.Node.prototype.toObject.call(this);return r.children=[],this.getChildren().forEach(h=>{r.children.push(h.toObject())}),r}isAncestorOf(r){let h=r.getParent();for(;h;){if(h._id===this._id)return!0;h=h.getParent()}return!1}clone(r){const h=e.Node.prototype.clone.call(this,r);return this.getChildren().forEach(function(f){h.add(f.clone())}),h}getAllIntersections(r){const h=[];return this.find("Shape").forEach(f=>{f.isVisible()&&f.intersects(r)&&h.push(f)}),h}_clearSelfAndDescendantCache(r){var h;super._clearSelfAndDescendantCache(r),!this.isCached()&&((h=this.children)===null||h===void 0||h.forEach(function(f){f._clearSelfAndDescendantCache(r)}))}_setChildrenIndices(){var r;(r=this.children)===null||r===void 0||r.forEach(function(h,f){h.index=f}),this._requestDraw()}drawScene(r,h,f){const p=this.getLayer(),v=r||p&&p.getCanvas(),b=v&&v.getContext(),x=this._getCanvasCache(),w=x&&x.scene,y=v&&v.isCache;if(!this.isVisible()&&!y)return this;if(w){b.save();const d=this.getAbsoluteTransform(h).getMatrix();b.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(b),b.restore()}else this._drawChildren("drawScene",v,h,f);return this}drawHit(r,h){if(!this.shouldDrawHit(h))return this;const f=this.getLayer(),p=r||f&&f.hitCanvas,v=p&&p.getContext(),b=this._getCanvasCache();if(b&&b.hit){v.save();const w=this.getAbsoluteTransform(h).getMatrix();v.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._drawCachedHitCanvas(v),v.restore()}else this._drawChildren("drawHit",p,h);return this}_drawChildren(r,h,f,p){var v;const b=h&&h.getContext(),x=this.clipWidth(),w=this.clipHeight(),y=this.clipFunc(),d=typeof x=="number"&&typeof w=="number"||y,c=f===this;if(d){b.save();const R=this.getAbsoluteTransform(f);let o=R.getMatrix();b.transform(o[0],o[1],o[2],o[3],o[4],o[5]),b.beginPath();let s;if(y)s=y.call(this,b,this);else{const u=this.clipX(),m=this.clipY();b.rect(u||0,m||0,x,w)}b.clip.apply(b,s),o=R.copy().invert().getMatrix(),b.transform(o[0],o[1],o[2],o[3],o[4],o[5])}const S=!c&&this.globalCompositeOperation()!=="source-over"&&r==="drawScene";S&&(b.save(),b._applyGlobalCompositeOperation(this)),(v=this.children)===null||v===void 0||v.forEach(function(R){R[r](h,f,p)}),S&&b.restore(),d&&b.restore()}getClientRect(r={}){var h;const f=r.skipTransform,p=r.relativeTo;let v,b,x,w,y={x:1/0,y:1/0,width:0,height:0};const d=this;(h=this.children)===null||h===void 0||h.forEach(function(R){if(!R.visible())return;const o=R.getClientRect({relativeTo:d,skipShadow:r.skipShadow,skipStroke:r.skipStroke});o.width===0&&o.height===0||(v===void 0?(v=o.x,b=o.y,x=o.x+o.width,w=o.y+o.height):(v=Math.min(v,o.x),b=Math.min(b,o.y),x=Math.max(x,o.x+o.width),w=Math.max(w,o.y+o.height)))});const c=this.find("Shape");let S=!1;for(let R=0;R<c.length;R++)if(c[R]._isVisible(this)){S=!0;break}return S&&v!==void 0?y={x:v,y:b,width:x-v,height:w-b}:y={x:0,y:0,width:0,height:0},f?y:this._transformedRect(y,p)}};return ge.Container=i,t.Factory.addComponentsGetterSetter(i,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(i,"clipX",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(i,"clipY",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(i,"clipWidth",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(i,"clipHeight",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(i,"clipFunc"),ge}var fn={},mr;function la(){return mr||(mr=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=ct(),n=Wt(),i=rn(),l=st(),r=tn(),h=Hn(),f=st(),p=mi(),v="Stage",b="string",x="px",w="mouseout",y="mouseleave",d="mouseover",c="mouseenter",S="mousemove",R="mousedown",o="mouseup",s="pointermove",u="pointerdown",m="pointerup",k="pointercancel",D="lostpointercapture",C="pointerout",G="pointerleave",E="pointerover",O="pointerenter",N="contextmenu",a="touchstart",g="touchend",_="touchmove",A="touchcancel",T="wheel",F=5,I=[[c,"_pointerenter"],[R,"_pointerdown"],[S,"_pointermove"],[o,"_pointerup"],[y,"_pointerleave"],[a,"_pointerdown"],[_,"_pointermove"],[g,"_pointerup"],[A,"_pointercancel"],[d,"_pointerover"],[T,"_wheel"],[N,"_contextmenu"],[u,"_pointerdown"],[s,"_pointermove"],[m,"_pointerup"],[k,"_pointercancel"],[D,"_lostpointercapture"]],M={mouse:{[C]:w,[G]:y,[E]:d,[O]:c,[s]:S,[u]:R,[m]:o,[k]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[C]:"touchout",[G]:"touchleave",[E]:"touchover",[O]:"touchenter",[s]:_,[u]:a,[m]:g,[k]:A,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[C]:C,[G]:G,[E]:E,[O]:O,[s]:s,[u]:u,[m]:m,[k]:k,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},B=nt=>nt.indexOf("pointer")>=0?"pointer":nt.indexOf("touch")>=0?"touch":"mouse",H=nt=>{const P=B(nt);if(P==="pointer")return l.Konva.pointerEventsEnabled&&M.pointer;if(P==="touch")return M.touch;if(P==="mouse")return M.mouse};function J(nt={}){return(nt.clipFunc||nt.clipWidth||nt.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),nt}const tt="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class ht extends i.Container{constructor(P){super(J(P)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{J(this.attrs)}),this._checkVisibility()}_validateAdd(P){const L=P.getType()==="Layer",U=P.getType()==="FastLayer";L||U||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const P=this.visible()?"":"none";this.content.style.display=P}setContainer(P){if(typeof P===b){if(P.charAt(0)==="."){const U=P.slice(1);P=document.getElementsByClassName(U)[0]}else{var L;P.charAt(0)!=="#"?L=P:L=P.slice(1),P=document.getElementById(L)}if(!P)throw"Can not find container in document with id "+L}return this._setAttr("container",P),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),P.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const P=this.children,L=P.length;for(let U=0;U<L;U++)P[U].clear();return this}clone(P){return P||(P={}),P.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,P)}destroy(){super.destroy();const P=this.content;P&&e.Util._isInDocument(P)&&this.container().removeChild(P);const L=t.stages.indexOf(this);return L>-1&&t.stages.splice(L,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const P=this._pointerPositions[0]||this._changedPointerPositions[0];return P?{x:P.x,y:P.y}:(e.Util.warn(tt),null)}_getPointerById(P){return this._pointerPositions.find(L=>L.id===P)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(P){P=P||{},P.x=P.x||0,P.y=P.y||0,P.width=P.width||this.width(),P.height=P.height||this.height();const L=new r.SceneCanvas({width:P.width,height:P.height,pixelRatio:P.pixelRatio||1}),U=L.getContext()._context,j=this.children;return(P.x||P.y)&&U.translate(-1*P.x,-1*P.y),j.forEach(function(z){if(!z.isVisible())return;const et=z._toKonvaCanvas(P);U.drawImage(et._canvas,P.x,P.y,et.getWidth()/et.getPixelRatio(),et.getHeight()/et.getPixelRatio())}),L}getIntersection(P){if(!P)return null;const L=this.children,U=L.length,j=U-1;for(let z=j;z>=0;z--){const et=L[z].getIntersection(P);if(et)return et}return null}_resizeDOM(){const P=this.width(),L=this.height();this.content&&(this.content.style.width=P+x,this.content.style.height=L+x),this.bufferCanvas.setSize(P,L),this.bufferHitCanvas.setSize(P,L),this.children.forEach(U=>{U.setSize({width:P,height:L}),U.draw()})}add(P,...L){if(arguments.length>1){for(let j=0;j<arguments.length;j++)this.add(arguments[j]);return this}super.add(P);const U=this.children.length;return U>F&&e.Util.warn("The stage has "+U+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),P.setSize({width:this.width(),height:this.height()}),P.draw(),l.Konva.isBrowser&&this.content.appendChild(P.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(P){return p.hasPointerCapture(P,this)}setPointerCapture(P){p.setPointerCapture(P,this)}releaseCapture(P){p.releaseCapture(P,this)}getLayers(){return this.children}_bindContentEvents(){l.Konva.isBrowser&&I.forEach(([P,L])=>{this.content.addEventListener(P,U=>{this[L](U)},{passive:!1})})}_pointerenter(P){this.setPointersPositions(P);const L=H(P.type);L&&this._fire(L.pointerenter,{evt:P,target:this,currentTarget:this})}_pointerover(P){this.setPointersPositions(P);const L=H(P.type);L&&this._fire(L.pointerover,{evt:P,target:this,currentTarget:this})}_getTargetShape(P){let L=this[P+"targetShape"];return L&&!L.getStage()&&(L=null),L}_pointerleave(P){const L=H(P.type),U=B(P.type);if(!L)return;this.setPointersPositions(P);const j=this._getTargetShape(U),z=!(l.Konva.isDragging()||l.Konva.isTransforming())||l.Konva.hitOnDragEnabled;j&&z?(j._fireAndBubble(L.pointerout,{evt:P}),j._fireAndBubble(L.pointerleave,{evt:P}),this._fire(L.pointerleave,{evt:P,target:this,currentTarget:this}),this[U+"targetShape"]=null):z&&(this._fire(L.pointerleave,{evt:P,target:this,currentTarget:this}),this._fire(L.pointerout,{evt:P,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(P){const L=H(P.type),U=B(P.type);if(!L)return;this.setPointersPositions(P);let j=!1;this._changedPointerPositions.forEach(z=>{const et=this.getIntersection(z);if(h.DD.justDragged=!1,l.Konva["_"+U+"ListenClick"]=!0,!et||!et.isListening()){this[U+"ClickStartShape"]=void 0;return}l.Konva.capturePointerEventsEnabled&&et.setPointerCapture(z.id),this[U+"ClickStartShape"]=et,et._fireAndBubble(L.pointerdown,{evt:P,pointerId:z.id}),j=!0;const gt=P.type.indexOf("touch")>=0;et.preventDefault()&&P.cancelable&&gt&&P.preventDefault()}),j||this._fire(L.pointerdown,{evt:P,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(P){const L=H(P.type),U=B(P.type);if(!L||(l.Konva.isDragging()&&h.DD.node.preventDefault()&&P.cancelable&&P.preventDefault(),this.setPointersPositions(P),!(!(l.Konva.isDragging()||l.Konva.isTransforming())||l.Konva.hitOnDragEnabled)))return;const z={};let et=!1;const gt=this._getTargetShape(U);this._changedPointerPositions.forEach(Ot=>{const Z=p.getCapturedShape(Ot.id)||this.getIntersection(Ot),Jt=Ot.id,Ct={evt:P,pointerId:Jt},Zt=gt!==Z;if(Zt&&gt&&(gt._fireAndBubble(L.pointerout,{...Ct},Z),gt._fireAndBubble(L.pointerleave,{...Ct},Z)),Z){if(z[Z._id])return;z[Z._id]=!0}Z&&Z.isListening()?(et=!0,Zt&&(Z._fireAndBubble(L.pointerover,{...Ct},gt),Z._fireAndBubble(L.pointerenter,{...Ct},gt),this[U+"targetShape"]=Z),Z._fireAndBubble(L.pointermove,{...Ct})):gt&&(this._fire(L.pointerover,{evt:P,target:this,currentTarget:this,pointerId:Jt}),this[U+"targetShape"]=null)}),et||this._fire(L.pointermove,{evt:P,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(P){const L=H(P.type),U=B(P.type);if(!L)return;this.setPointersPositions(P);const j=this[U+"ClickStartShape"],z=this[U+"ClickEndShape"],et={};let gt=!1;this._changedPointerPositions.forEach(Ot=>{const Z=p.getCapturedShape(Ot.id)||this.getIntersection(Ot);if(Z){if(Z.releaseCapture(Ot.id),et[Z._id])return;et[Z._id]=!0}const Jt=Ot.id,Ct={evt:P,pointerId:Jt};let Zt=!1;l.Konva["_"+U+"InDblClickWindow"]?(Zt=!0,clearTimeout(this[U+"DblTimeout"])):h.DD.justDragged||(l.Konva["_"+U+"InDblClickWindow"]=!0,clearTimeout(this[U+"DblTimeout"])),this[U+"DblTimeout"]=setTimeout(function(){l.Konva["_"+U+"InDblClickWindow"]=!1},l.Konva.dblClickWindow),Z&&Z.isListening()?(gt=!0,this[U+"ClickEndShape"]=Z,Z._fireAndBubble(L.pointerup,{...Ct}),l.Konva["_"+U+"ListenClick"]&&j&&j===Z&&(Z._fireAndBubble(L.pointerclick,{...Ct}),Zt&&z&&z===Z&&Z._fireAndBubble(L.pointerdblclick,{...Ct}))):(this[U+"ClickEndShape"]=null,l.Konva["_"+U+"ListenClick"]&&this._fire(L.pointerclick,{evt:P,target:this,currentTarget:this,pointerId:Jt}),Zt&&this._fire(L.pointerdblclick,{evt:P,target:this,currentTarget:this,pointerId:Jt}))}),gt||this._fire(L.pointerup,{evt:P,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),l.Konva["_"+U+"ListenClick"]=!1,P.cancelable&&U!=="touch"&&U!=="pointer"&&P.preventDefault()}_contextmenu(P){this.setPointersPositions(P);const L=this.getIntersection(this.getPointerPosition());L&&L.isListening()?L._fireAndBubble(N,{evt:P}):this._fire(N,{evt:P,target:this,currentTarget:this})}_wheel(P){this.setPointersPositions(P);const L=this.getIntersection(this.getPointerPosition());L&&L.isListening()?L._fireAndBubble(T,{evt:P}):this._fire(T,{evt:P,target:this,currentTarget:this})}_pointercancel(P){this.setPointersPositions(P);const L=p.getCapturedShape(P.pointerId)||this.getIntersection(this.getPointerPosition());L&&L._fireAndBubble(m,p.createEvent(P)),p.releaseCapture(P.pointerId)}_lostpointercapture(P){p.releaseCapture(P.pointerId)}setPointersPositions(P){const L=this._getContentPosition();let U=null,j=null;P=P||window.event,P.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(P.touches,z=>{this._pointerPositions.push({id:z.identifier,x:(z.clientX-L.left)/L.scaleX,y:(z.clientY-L.top)/L.scaleY})}),Array.prototype.forEach.call(P.changedTouches||P.touches,z=>{this._changedPointerPositions.push({id:z.identifier,x:(z.clientX-L.left)/L.scaleX,y:(z.clientY-L.top)/L.scaleY})})):(U=(P.clientX-L.left)/L.scaleX,j=(P.clientY-L.top)/L.scaleY,this.pointerPos={x:U,y:j},this._pointerPositions=[{x:U,y:j,id:e.Util._getFirstPointerId(P)}],this._changedPointerPositions=[{x:U,y:j,id:e.Util._getFirstPointerId(P)}])}_setPointerPosition(P){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(P)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const P=this.content.getBoundingClientRect();return{top:P.top,left:P.left,scaleX:P.width/this.content.clientWidth||1,scaleY:P.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!l.Konva.isBrowser)return;const P=this.container();if(!P)throw"Stage has no container. A container is required.";P.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),P.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(P){P.batchDraw()}),this}}t.Stage=ht,ht.prototype.nodeType=v,(0,f._registerNode)(ht),n.Factory.addGetterSetter(ht,"container"),l.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(nt=>{nt.batchDraw()})})}(fn)),fn}var pe={},yr;function wi(){if(yr)return pe;yr=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.Layer=void 0;const t=ct(),e=rn(),n=De(),i=Wt(),l=tn(),r=zt(),h=en(),f=st(),p="#",v="beforeDraw",b="draw",x=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],w=x.length;class y extends e.Container{constructor(c){super(c),this.canvas=new l.SceneCanvas,this.hitCanvas=new l.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(c){return this.getContext().clear(c),this.getHitCanvas().getContext().clear(c),this}setZIndex(c){super.setZIndex(c);const S=this.getStage();return S&&S.content&&(S.content.removeChild(this.getNativeCanvasElement()),c<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[c+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const c=this.getStage();return c&&c.content&&(c.content.removeChild(this.getNativeCanvasElement()),c.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const S=this.getStage();return!S||!S.content?!1:(S.content.removeChild(this.getNativeCanvasElement()),this.index<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[this.index+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const c=this.getStage();if(c){const S=c.children;c.content&&(c.content.removeChild(this.getNativeCanvasElement()),c.content.insertBefore(this.getNativeCanvasElement(),S[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const c=this.getStage();if(c){const S=c.children;c.content&&(c.content.removeChild(this.getNativeCanvasElement()),c.content.insertBefore(this.getNativeCanvasElement(),S[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const c=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),c&&c.parentNode&&t.Util._isInDocument(c)&&c.parentNode.removeChild(c),this}getStage(){return this.parent}setSize({width:c,height:S}){return this.canvas.setSize(c,S),this.hitCanvas.setSize(c,S),this._setSmoothEnabled(),this}_validateAdd(c){const S=c.getType();S!=="Group"&&S!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(c){return c=c||{},c.width=c.width||this.getWidth(),c.height=c.height||this.getHeight(),c.x=c.x!==void 0?c.x:this.x(),c.y=c.y!==void 0?c.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,c)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(c){if(!this.isListening()||!this.isVisible())return null;let S=1,R=!1;for(;;){for(let o=0;o<w;o++){const s=x[o],u=this._getIntersection({x:c.x+s.x*S,y:c.y+s.y*S}),m=u.shape;if(m)return m;if(R=!!u.antialiased,!u.antialiased)break}if(R)S+=1;else return null}}_getIntersection(c){const S=this.hitCanvas.pixelRatio,R=this.hitCanvas.context.getImageData(Math.round(c.x*S),Math.round(c.y*S),1,1).data,o=R[3];if(o===255){const s=t.Util._rgbToHex(R[0],R[1],R[2]),u=h.shapes[p+s];return u?{shape:u}:{antialiased:!0}}else if(o>0)return{antialiased:!0};return{}}drawScene(c,S){const R=this.getLayer(),o=c||R&&R.getCanvas();return this._fire(v,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),e.Container.prototype.drawScene.call(this,o,S),this._fire(b,{node:this}),this}drawHit(c,S){const R=this.getLayer(),o=c||R&&R.hitCanvas;return R&&R.clearBeforeDraw()&&R.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,o,S),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(c){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(c)}getHitGraphEnabled(c){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const c=this.parent;!!this.hitCanvas._canvas.parentNode?c.content.removeChild(this.hitCanvas._canvas):c.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return pe.Layer=y,y.prototype.nodeType="Layer",(0,f._registerNode)(y),i.Factory.addGetterSetter(y,"imageSmoothingEnabled",!0),i.Factory.addGetterSetter(y,"clearBeforeDraw",!0),i.Factory.addGetterSetter(y,"hitGraphEnabled",!0,(0,r.getBooleanValidator)()),pe}var _e={},br;function ca(){if(br)return _e;br=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.FastLayer=void 0;const t=ct(),e=wi(),n=st();let i=class extends e.Layer{constructor(r){super(r),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return _e.FastLayer=i,i.prototype.nodeType="FastLayer",(0,n._registerNode)(i),_e}var ve={},wr;function ha(){if(wr)return ve;wr=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.Group=void 0;const t=ct(),e=rn(),n=st();let i=class extends e.Container{_validateAdd(r){const h=r.getType();h!=="Group"&&h!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return ve.Group=i,i.prototype.nodeType="Group",(0,n._registerNode)(i),ve}var me={},Cr;function Ci(){if(Cr)return me;Cr=1,Object.defineProperty(me,"__esModule",{value:!0}),me.Animation=void 0;const t=st(),e=ct(),n=function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}}();let i=class ee{constructor(r,h){this.id=ee.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=r,this.setLayers(h)}setLayers(r){let h=[];return r&&(h=Array.isArray(r)?r:[r]),this.layers=h,this}getLayers(){return this.layers}addLayer(r){const h=this.layers,f=h.length;for(let p=0;p<f;p++)if(h[p]._id===r._id)return!1;return this.layers.push(r),!0}isRunning(){const h=ee.animations,f=h.length;for(let p=0;p<f;p++)if(h[p].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),ee._addAnimation(this),this}stop(){return ee._removeAnimation(this),this}_updateFrameObject(r){this.frame.timeDiff=r-this.frame.lastTime,this.frame.lastTime=r,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(r){this.animations.push(r),this._handleAnimation()}static _removeAnimation(r){const h=r.id,f=this.animations,p=f.length;for(let v=0;v<p;v++)if(f[v].id===h){this.animations.splice(v,1);break}}static _runFrames(){const r={},h=this.animations;for(let f=0;f<h.length;f++){const p=h[f],v=p.layers,b=p.func;p._updateFrameObject(n());const x=v.length;let w;if(b?w=b.call(p,p.frame)!==!1:w=!0,!!w)for(let y=0;y<x;y++){const d=v[y];d._id!==void 0&&(r[d._id]=d)}}for(const f in r)r.hasOwnProperty(f)&&r[f].batchDraw()}static _animationLoop(){const r=ee;r.animations.length?(r._runFrames(),e.Util.requestAnimFrame(r._animationLoop)):r.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return me.Animation=i,i.animations=[],i.animIdCounter=0,i.animRunning=!1,me}var gn={},Sr;function ua(){return Sr||(Sr=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=ct(),n=Ci(),i=De(),l=st(),r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},h=1,f=2,p=3,v=["fill","stroke","shadowColor"];let b=0;class x{constructor(d,c,S,R,o,s,u){this.prop=d,this.propFunc=c,this.begin=R,this._pos=R,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=u,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=S,this._change=o-this.begin,this.pause()}fire(d){const c=this[d];c&&c()}setTime(d){d>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():d<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=d,this.update())}getTime(){return this._time}setPosition(d){this.prevPos=this._pos,this.propFunc(d),this._pos=d}getPosition(d){return d===void 0&&(d=this._time),this.func(d,this.begin,this._change,this.duration)}play(){this.state=f,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=p,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(d){this.pause(),this._time=d,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const d=this.getTimer()-this._startTime;this.state===f?this.setTime(d):this.state===p&&this.setTime(this.duration-d)}pause(){this.state=h,this.fire("onPause")}getTimer(){return new Date().getTime()}}class w{constructor(d){const c=this,S=d.node,R=S._id,o=d.easing||t.Easings.Linear,s=!!d.yoyo;let u,m;typeof d.duration>"u"?u=.3:d.duration===0?u=.001:u=d.duration,this.node=S,this._id=b++;const k=S.getLayer()||(S instanceof l.Konva.Stage?S.getLayers():null);k||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){c.tween.onEnterFrame()},k),this.tween=new x(m,function(D){c._tweenFunc(D)},o,0,1,u*1e3,s),this._addListeners(),w.attrs[R]||(w.attrs[R]={}),w.attrs[R][this._id]||(w.attrs[R][this._id]={}),w.tweens[R]||(w.tweens[R]={});for(m in d)r[m]===void 0&&this._addAttr(m,d[m]);this.reset(),this.onFinish=d.onFinish,this.onReset=d.onReset,this.onUpdate=d.onUpdate}_addAttr(d,c){const S=this.node,R=S._id;let o,s,u,m,k;const D=w.tweens[R][d];D&&delete w.attrs[R][D][d];let C=S.getAttr(d);if(e.Util._isArray(c))if(o=[],s=Math.max(c.length,C.length),d==="points"&&c.length!==C.length&&(c.length>C.length?(m=C,C=e.Util._prepareArrayForTween(C,c,S.closed())):(u=c,c=e.Util._prepareArrayForTween(c,C,S.closed()))),d.indexOf("fill")===0)for(let G=0;G<s;G++)if(G%2===0)o.push(c[G]-C[G]);else{const E=e.Util.colorToRGBA(C[G]);k=e.Util.colorToRGBA(c[G]),C[G]=E,o.push({r:k.r-E.r,g:k.g-E.g,b:k.b-E.b,a:k.a-E.a})}else for(let G=0;G<s;G++)o.push(c[G]-C[G]);else v.indexOf(d)!==-1?(C=e.Util.colorToRGBA(C),k=e.Util.colorToRGBA(c),o={r:k.r-C.r,g:k.g-C.g,b:k.b-C.b,a:k.a-C.a}):o=c-C;w.attrs[R][this._id][d]={start:C,diff:o,end:c,trueEnd:u,trueStart:m},w.tweens[R][d]=this._id}_tweenFunc(d){const c=this.node,S=w.attrs[c._id][this._id];let R,o,s,u,m,k,D,C;for(R in S){if(o=S[R],s=o.start,u=o.diff,C=o.end,e.Util._isArray(s))if(m=[],D=Math.max(s.length,C.length),R.indexOf("fill")===0)for(k=0;k<D;k++)k%2===0?m.push((s[k]||0)+u[k]*d):m.push("rgba("+Math.round(s[k].r+u[k].r*d)+","+Math.round(s[k].g+u[k].g*d)+","+Math.round(s[k].b+u[k].b*d)+","+(s[k].a+u[k].a*d)+")");else for(k=0;k<D;k++)m.push((s[k]||0)+u[k]*d);else v.indexOf(R)!==-1?m="rgba("+Math.round(s.r+u.r*d)+","+Math.round(s.g+u.g*d)+","+Math.round(s.b+u.b*d)+","+(s.a+u.a*d)+")":m=s+u*d;c.setAttr(R,m)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const d=this.node,c=w.attrs[d._id][this._id];c.points&&c.points.trueEnd&&d.setAttr("points",c.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const d=this.node,c=w.attrs[d._id][this._id];c.points&&c.points.trueStart&&d.points(c.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(d){return this.tween.seek(d*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const d=this.node._id,c=this._id,S=w.tweens[d];this.pause();for(const R in S)delete w.tweens[d][R];delete w.attrs[d][c]}}t.Tween=w,w.attrs={},w.tweens={},i.Node.prototype.to=function(y){const d=y.onFinish;y.node=this,y.onFinish=function(){this.destroy(),d&&d()},new w(y).play()},t.Easings={BackEaseIn(y,d,c,S){return c*(y/=S)*y*((1.70158+1)*y-1.70158)+d},BackEaseOut(y,d,c,S){return c*((y=y/S-1)*y*((1.70158+1)*y+1.70158)+1)+d},BackEaseInOut(y,d,c,S){let R=1.70158;return(y/=S/2)<1?c/2*(y*y*(((R*=1.525)+1)*y-R))+d:c/2*((y-=2)*y*(((R*=1.525)+1)*y+R)+2)+d},ElasticEaseIn(y,d,c,S,R,o){let s=0;return y===0?d:(y/=S)===1?d+c:(o||(o=S*.3),!R||R<Math.abs(c)?(R=c,s=o/4):s=o/(2*Math.PI)*Math.asin(c/R),-(R*Math.pow(2,10*(y-=1))*Math.sin((y*S-s)*(2*Math.PI)/o))+d)},ElasticEaseOut(y,d,c,S,R,o){let s=0;return y===0?d:(y/=S)===1?d+c:(o||(o=S*.3),!R||R<Math.abs(c)?(R=c,s=o/4):s=o/(2*Math.PI)*Math.asin(c/R),R*Math.pow(2,-10*y)*Math.sin((y*S-s)*(2*Math.PI)/o)+c+d)},ElasticEaseInOut(y,d,c,S,R,o){let s=0;return y===0?d:(y/=S/2)===2?d+c:(o||(o=S*(.3*1.5)),!R||R<Math.abs(c)?(R=c,s=o/4):s=o/(2*Math.PI)*Math.asin(c/R),y<1?-.5*(R*Math.pow(2,10*(y-=1))*Math.sin((y*S-s)*(2*Math.PI)/o))+d:R*Math.pow(2,-10*(y-=1))*Math.sin((y*S-s)*(2*Math.PI)/o)*.5+c+d)},BounceEaseOut(y,d,c,S){return(y/=S)<1/2.75?c*(7.5625*y*y)+d:y<2/2.75?c*(7.5625*(y-=1.5/2.75)*y+.75)+d:y<2.5/2.75?c*(7.5625*(y-=2.25/2.75)*y+.9375)+d:c*(7.5625*(y-=2.625/2.75)*y+.984375)+d},BounceEaseIn(y,d,c,S){return c-t.Easings.BounceEaseOut(S-y,0,c,S)+d},BounceEaseInOut(y,d,c,S){return y<S/2?t.Easings.BounceEaseIn(y*2,0,c,S)*.5+d:t.Easings.BounceEaseOut(y*2-S,0,c,S)*.5+c*.5+d},EaseIn(y,d,c,S){return c*(y/=S)*y+d},EaseOut(y,d,c,S){return-c*(y/=S)*(y-2)+d},EaseInOut(y,d,c,S){return(y/=S/2)<1?c/2*y*y+d:-c/2*(--y*(y-2)-1)+d},StrongEaseIn(y,d,c,S){return c*(y/=S)*y*y*y*y+d},StrongEaseOut(y,d,c,S){return c*((y=y/S-1)*y*y*y*y+1)+d},StrongEaseInOut(y,d,c,S){return(y/=S/2)<1?c/2*y*y*y*y*y+d:c/2*((y-=2)*y*y*y*y+2)+d},Linear(y,d,c,S){return c*y/S+d}}}(gn)),gn}var xr;function Er(){return xr||(xr=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=st(),n=ct(),i=De(),l=rn(),r=la(),h=wi(),f=ca(),p=ha(),v=Hn(),b=en(),x=Ci(),w=ua(),y=vi(),d=tn();t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:i.Node,Container:l.Container,Stage:r.Stage,stages:r.stages,Layer:h.Layer,FastLayer:f.FastLayer,Group:p.Group,DD:v.DD,Shape:b.Shape,shapes:b.shapes,Animation:x.Animation,Tween:w.Tween,Easings:w.Easings,Context:y.Context,Canvas:d.Canvas}),t.default=t.Konva}(dn)),dn}var Pr;function da(){return Pr||(Pr=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=Er();Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const i=Er();t.exports=i.Konva}(Ge,Ge.exports)),Ge.exports}var fa=da();const Si=ra(fa);function ga(t,e){Tt(e,!0);const[n,i]=Xn(),l=()=>Yn(o,"$parent",n);let r=Y(e,"staticConfig",3,!1),h=Y(e,"x",15),f=Y(e,"y",15),p=Y(e,"scale",15),v=Y(e,"scaleX",15),b=Y(e,"scaleY",15),x=Y(e,"rotation",15),w=Y(e,"skewX",15),y=Y(e,"skewY",15),d=Qe(e,["$$slots","$$events","$$legacy","children","staticConfig","x","y","scale","scaleX","scaleY","rotation","skewX","skewY"]);const c=new Si.Layer({x:h(),y:f(),scale:p(),scaleX:v(),scaleY:b(),rotation:x(),skewX:w(),skewY:y(),...d}),S=_i(null);let R=Ie(!1),o=oa();Te(()=>{if(l().add(c),!r()){const D=c.getAttrs();c.on("transformend",()=>{h()!==void 0&&h(D.x),f()!==void 0&&f(D.y),p()!==void 0&&p(D.scale),v()!==void 0&&v(D.scaleX),b()!==void 0&&b(D.scaleY),x()!==void 0&&x(D.rotation),w()!==void 0&&w(D.skewX),y()!==void 0&&y(D.skewY)}),c.on("dragend",()=>{h()!==void 0&&h(D.x),f()!==void 0&&f(D.y)})}Object.keys(d).filter(D=>!D.startsWith("on")).forEach(D=>{K(()=>{c.setAttr(D,d[D])})}),K(()=>{c.setAttr("x",h())}),K(()=>{c.setAttr("y",f())}),K(()=>{c.setAttr("scale",p())}),K(()=>{c.setAttr("scaleX",v())}),K(()=>{c.setAttr("scaleY",b())}),K(()=>{c.setAttr("rotation",x())}),K(()=>{c.setAttr("skewX",w())}),K(()=>{c.setAttr("skewY",y())}),nn(d,c),S.set(c),it(R,!0)}),$e(()=>{c.destroy()}),yi(Pe.Layer,S);var s=Ee(),u=Mt(s);{var m=D=>{var C=Ee(),G=Mt(C);hi(G,()=>e.children),vt(D,C)};Bn(u,D=>{V(R)&&e.children&&D(m)})}vt(t,s);var k=Dt({handle:c});return i(),k}var ye={},kr;function pa(){if(kr)return ye;kr=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.Rect=void 0;const t=Wt(),e=en(),n=st(),i=ct(),l=zt();class r extends e.Shape{_sceneFunc(f){const p=this.cornerRadius(),v=this.width(),b=this.height();f.beginPath(),p?i.Util.drawRoundedRectPath(f,v,b,p):f.rect(0,0,v,b),f.closePath(),f.fillStrokeShape(this)}}return ye.Rect=r,r.prototype.className="Rect",(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"cornerRadius",0,(0,l.getNumberOrArrayOfNumbersValidator)(4)),ye}var _a=pa();function va(t,e){Tt(e,!0);const[n,i]=Xn(),l=()=>Yn(S,"$parent",n);let r=Y(e,"staticConfig",3,!1),h=Y(e,"x",15),f=Y(e,"y",15),p=Y(e,"scale",15),v=Y(e,"scaleX",15),b=Y(e,"scaleY",15),x=Y(e,"rotation",15),w=Y(e,"skewX",15),y=Y(e,"skewY",15),d=Qe(e,["$$slots","$$events","$$legacy","staticConfig","x","y","scale","scaleX","scaleY","rotation","skewX","skewY"]);const c=new _a.Rect({x:h(),y:f(),scale:p(),scaleX:v(),scaleY:b(),rotation:x(),skewX:w(),skewY:y(),...d}),S=bi();Te(()=>{if(l().add(c),!r()){const o=c.getAttrs();c.on("transformend",()=>{h()!==void 0&&h(o.x),f()!==void 0&&f(o.y),p()!==void 0&&p(o.scale),v()!==void 0&&v(o.scaleX),b()!==void 0&&b(o.scaleY),x()!==void 0&&x(o.rotation),w()!==void 0&&w(o.skewX),y()!==void 0&&y(o.skewY)}),c.on("dragend",()=>{h()!==void 0&&h(o.x),f()!==void 0&&f(o.y)})}Object.keys(d).filter(o=>!o.startsWith("on")).forEach(o=>{K(()=>{c.setAttr(o,d[o])})}),K(()=>{c.setAttr("x",h())}),K(()=>{c.setAttr("y",f())}),K(()=>{c.setAttr("scale",p())}),K(()=>{c.setAttr("scaleX",v())}),K(()=>{c.setAttr("scaleY",b())}),K(()=>{c.setAttr("rotation",x())}),K(()=>{c.setAttr("skewX",w())}),K(()=>{c.setAttr("skewY",y())}),nn(d,c)}),$e(()=>{c.destroy()});var R=Dt({handle:c});return i(),R}var ma=en();function ya(t,e){Tt(e,!0);const[n,i]=Xn(),l=()=>Yn(S,"$parent",n);let r=Y(e,"staticConfig",3,!1),h=Y(e,"x",15),f=Y(e,"y",15),p=Y(e,"scale",15),v=Y(e,"scaleX",15),b=Y(e,"scaleY",15),x=Y(e,"rotation",15),w=Y(e,"skewX",15),y=Y(e,"skewY",15),d=Qe(e,["$$slots","$$events","$$legacy","staticConfig","x","y","scale","scaleX","scaleY","rotation","skewX","skewY"]);const c=new ma.Shape({x:h(),y:f(),scale:p(),scaleX:v(),scaleY:b(),rotation:x(),skewX:w(),skewY:y(),...d}),S=bi();Te(()=>{if(l().add(c),!r()){const o=c.getAttrs();c.on("transformend",()=>{h()!==void 0&&h(o.x),f()!==void 0&&f(o.y),p()!==void 0&&p(o.scale),v()!==void 0&&v(o.scaleX),b()!==void 0&&b(o.scaleY),x()!==void 0&&x(o.rotation),w()!==void 0&&w(o.skewX),y()!==void 0&&y(o.skewY)}),c.on("dragend",()=>{h()!==void 0&&h(o.x),f()!==void 0&&f(o.y)})}Object.keys(d).filter(o=>!o.startsWith("on")).forEach(o=>{K(()=>{c.setAttr(o,d[o])})}),K(()=>{c.setAttr("x",h())}),K(()=>{c.setAttr("y",f())}),K(()=>{c.setAttr("scale",p())}),K(()=>{c.setAttr("scaleX",v())}),K(()=>{c.setAttr("scaleY",b())}),K(()=>{c.setAttr("rotation",x())}),K(()=>{c.setAttr("skewX",w())}),K(()=>{c.setAttr("skewY",y())}),nn(d,c)}),$e(()=>{c.destroy()});var R=Dt({handle:c});return i(),R}var ba=jt("<div><!></div>");function wa(t,e){Tt(e,!0);let n=Y(e,"staticConfig",3,!1),i=Y(e,"x",15),l=Y(e,"y",15),r=Qe(e,["$$slots","$$events","$$legacy","children","staticConfig","x","y","divWrapperProps"]),h=Ie(null);function f(){return V(h)}const p=_i(null);let v,b=Ie(!1);Te(()=>{if(it(h,Nt(new Si.Stage({container:v,y:l(),x:i(),...r}))),!n()){const c=V(h).getAttrs();V(h).on("dragend",()=>{i()!==void 0&&i(c.x),l()!==void 0&&l(c.y)})}Object.keys(r).filter(c=>!c.startsWith("on")).forEach(c=>{K(()=>{V(h).setAttr(c,r[c])})}),K(()=>{V(h).setAttr("x",i())}),K(()=>{V(h).setAttr("y",l())}),nn(r,V(h)),p.set(V(h)),it(b,!0)}),$e(()=>{V(h)&&V(h).destroy()}),yi(Pe.Stage,p);var x=ba();let w;var y=Kt(x);{var d=c=>{var S=Ee(),R=Mt(S);hi(R,()=>e.children),vt(c,S)};Bn(y,c=>{V(b)&&e.children&&c(d)})}return fi(x,c=>v=c,()=>v),ae(()=>w=Vn(x,w,{...e.divWrapperProps})),vt(t,x),Dt({handle:f})}const rt=t=>t*Math.PI/180,Ca=t=>t*180/Math.PI;function Sa(t,e){Tt(e,!0);const n=10,i=2,l=Y(e,"showPath",3,!1);ya(t,{get scaleX(){return e.pixelPerMeter},get scaleY(){return e.pixelPerMeter},get width(){return e.route.box.width},get height(){return e.route.box.height},sceneFunc:r=>{const h=e.route.elementToDraw;for(const f of["border","road"]){r.beginPath();for(const p of h)switch(p.type){case"line":{r.lineTo(p.x,p.y);break}case"move":{r.moveTo(p.x,p.y);break}case"arc":{r.arc(p.cx,p.cy,p.radius,p.startAngleRad,p.endAngleRad,p.anticlockwise);break}}r.lineWidth=f==="border"?n+i*2:n,r.strokeStyle=f==="border"?"#ccc":"#888",r.stroke()}if(l())for(let f=0;f<e.route.pathLength;f++){const p=e.route.getPathPoint(f);r.beginPath(),r.arc(p.x,p.y,1,0,rt(360),!1),r.fillStyle="#f00",r.fill()}}}),Dt()}Qi();const Kn="-",xa=t=>{const e=Pa(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:h=>{const f=h.split(Kn);return f[0]===""&&f.length!==1&&f.shift(),xi(f,e)||Ea(h)},getConflictingClassGroupIds:(h,f)=>{const p=n[h]||[];return f&&i[h]?[...p,...i[h]]:p}}},xi=(t,e)=>{var h;if(t.length===0)return e.classGroupId;const n=t[0],i=e.nextPart.get(n),l=i?xi(t.slice(1),i):void 0;if(l)return l;if(e.validators.length===0)return;const r=t.join(Kn);return(h=e.validators.find(({validator:f})=>f(r)))==null?void 0:h.classGroupId},Ar=/^\[(.+)\]$/,Ea=t=>{if(Ar.test(t)){const e=Ar.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Pa=t=>{const{theme:e,prefix:n}=t,i={nextPart:new Map,validators:[]};return Aa(Object.entries(t.classGroups),n).forEach(([r,h])=>{An(h,i,r,e)}),i},An=(t,e,n,i)=>{t.forEach(l=>{if(typeof l=="string"){const r=l===""?e:Rr(e,l);r.classGroupId=n;return}if(typeof l=="function"){if(ka(l)){An(l(i),e,n,i);return}e.validators.push({validator:l,classGroupId:n});return}Object.entries(l).forEach(([r,h])=>{An(h,Rr(e,r),n,i)})})},Rr=(t,e)=>{let n=t;return e.split(Kn).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},ka=t=>t.isThemeGetter,Aa=(t,e)=>e?t.map(([n,i])=>{const l=i.map(r=>typeof r=="string"?e+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([h,f])=>[e+h,f])):r);return[n,l]}):t,Ra=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,i=new Map;const l=(r,h)=>{n.set(r,h),e++,e>t&&(e=0,i=n,n=new Map)};return{get(r){let h=n.get(r);if(h!==void 0)return h;if((h=i.get(r))!==void 0)return l(r,h),h},set(r,h){n.has(r)?n.set(r,h):l(r,h)}}},Ei="!",Ta=t=>{const{separator:e,experimentalParseClassName:n}=t,i=e.length===1,l=e[0],r=e.length,h=f=>{const p=[];let v=0,b=0,x;for(let S=0;S<f.length;S++){let R=f[S];if(v===0){if(R===l&&(i||f.slice(S,S+r)===e)){p.push(f.slice(b,S)),b=S+r;continue}if(R==="/"){x=S;continue}}R==="["?v++:R==="]"&&v--}const w=p.length===0?f:f.substring(b),y=w.startsWith(Ei),d=y?w.substring(1):w,c=x&&x>b?x-b:void 0;return{modifiers:p,hasImportantModifier:y,baseClassName:d,maybePostfixModifierPosition:c}};return n?f=>n({className:f,parseClassName:h}):h},Da=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(i=>{i[0]==="["?(e.push(...n.sort(),i),n=[]):n.push(i)}),e.push(...n.sort()),e},Oa=t=>({cache:Ra(t.cacheSize),parseClassName:Ta(t),...xa(t)}),Ga=/\s+/,La=(t,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:l}=e,r=[],h=t.trim().split(Ga);let f="";for(let p=h.length-1;p>=0;p-=1){const v=h[p],{modifiers:b,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:y}=n(v);let d=!!y,c=i(d?w.substring(0,y):w);if(!c){if(!d){f=v+(f.length>0?" "+f:f);continue}if(c=i(w),!c){f=v+(f.length>0?" "+f:f);continue}d=!1}const S=Da(b).join(":"),R=x?S+Ei:S,o=R+c;if(r.includes(o))continue;r.push(o);const s=l(c,d);for(let u=0;u<s.length;++u){const m=s[u];r.push(R+m)}f=v+(f.length>0?" "+f:f)}return f};function Fa(){let t=0,e,n,i="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Pi(e))&&(i&&(i+=" "),i+=n);return i}const Pi=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=Pi(t[i]))&&(n&&(n+=" "),n+=e);return n};function Na(t,...e){let n,i,l,r=h;function h(p){const v=e.reduce((b,x)=>x(b),t());return n=Oa(v),i=n.cache.get,l=n.cache.set,r=f,f(p)}function f(p){const v=i(p);if(v)return v;const b=La(p,n);return l(p,b),b}return function(){return r(Fa.apply(null,arguments))}}const Q=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},ki=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ia=/^\d+\/\d+$/,Ma=new Set(["px","full","screen"]),Ua=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ba=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Va=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ya=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Xa=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Et=t=>ie(t)||Ma.has(t)||Ia.test(t),Lt=t=>he(t,"length",Za),ie=t=>!!t&&!Number.isNaN(Number(t)),pn=t=>he(t,"number",ie),be=t=>!!t&&Number.isInteger(Number(t)),Ha=t=>t.endsWith("%")&&ie(t.slice(0,-1)),X=t=>ki.test(t),Ft=t=>Ua.test(t),Ka=new Set(["length","size","percentage"]),qa=t=>he(t,Ka,Ai),ja=t=>he(t,"position",Ai),za=new Set(["image","url"]),Wa=t=>he(t,za,$a),Ja=t=>he(t,"",Qa),we=()=>!0,he=(t,e,n)=>{const i=ki.exec(t);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):n(i[2]):!1},Za=t=>Ba.test(t)&&!Va.test(t),Ai=()=>!1,Qa=t=>Ya.test(t),$a=t=>Xa.test(t),to=()=>{const t=Q("colors"),e=Q("spacing"),n=Q("blur"),i=Q("brightness"),l=Q("borderColor"),r=Q("borderRadius"),h=Q("borderSpacing"),f=Q("borderWidth"),p=Q("contrast"),v=Q("grayscale"),b=Q("hueRotate"),x=Q("invert"),w=Q("gap"),y=Q("gradientColorStops"),d=Q("gradientColorStopPositions"),c=Q("inset"),S=Q("margin"),R=Q("opacity"),o=Q("padding"),s=Q("saturate"),u=Q("scale"),m=Q("sepia"),k=Q("skew"),D=Q("space"),C=Q("translate"),G=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",X,e],N=()=>[X,e],a=()=>["",Et,Lt],g=()=>["auto",ie,X],_=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],A=()=>["solid","dashed","dotted","double","none"],T=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",X],M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[ie,X];return{cacheSize:500,separator:":",theme:{colors:[we],spacing:[Et,Lt],blur:["none","",Ft,X],brightness:B(),borderColor:[t],borderRadius:["none","","full",Ft,X],borderSpacing:N(),borderWidth:a(),contrast:B(),grayscale:I(),hueRotate:B(),invert:I(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[Ha,Lt],inset:O(),margin:O(),opacity:B(),padding:N(),saturate:B(),scale:B(),sepia:I(),skew:B(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",X]}],container:["container"],columns:[{columns:[Ft]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[..._(),X]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:G()}],"overscroll-x":[{"overscroll-x":G()}],"overscroll-y":[{"overscroll-y":G()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[c]}],"inset-x":[{"inset-x":[c]}],"inset-y":[{"inset-y":[c]}],start:[{start:[c]}],end:[{end:[c]}],top:[{top:[c]}],right:[{right:[c]}],bottom:[{bottom:[c]}],left:[{left:[c]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",be,X]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",X]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",be,X]}],"grid-cols":[{"grid-cols":[we]}],"col-start-end":[{col:["auto",{span:["full",be,X]},X]}],"col-start":[{"col-start":g()}],"col-end":[{"col-end":g()}],"grid-rows":[{"grid-rows":[we]}],"row-start-end":[{row:["auto",{span:[be,X]},X]}],"row-start":[{"row-start":g()}],"row-end":[{"row-end":g()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",X]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",X]}],gap:[{gap:[w]}],"gap-x":[{"gap-x":[w]}],"gap-y":[{"gap-y":[w]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[o]}],px:[{px:[o]}],py:[{py:[o]}],ps:[{ps:[o]}],pe:[{pe:[o]}],pt:[{pt:[o]}],pr:[{pr:[o]}],pb:[{pb:[o]}],pl:[{pl:[o]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",X,e]}],"min-w":[{"min-w":[X,e,"min","max","fit"]}],"max-w":[{"max-w":[X,e,"none","full","min","max","fit","prose",{screen:[Ft]},Ft]}],h:[{h:[X,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[X,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[X,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[X,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ft,Lt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",pn]}],"font-family":[{font:[we]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",X]}],"line-clamp":[{"line-clamp":["none",ie,pn]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Et,X]}],"list-image":[{"list-image":["none",X]}],"list-style-type":[{list:["none","disc","decimal",X]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[R]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[R]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...A(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Et,Lt]}],"underline-offset":[{"underline-offset":["auto",Et,X]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",X]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",X]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[R]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[..._(),ja]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",qa]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Wa]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[d]}],"gradient-via-pos":[{via:[d]}],"gradient-to-pos":[{to:[d]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[f]}],"border-w-x":[{"border-x":[f]}],"border-w-y":[{"border-y":[f]}],"border-w-s":[{"border-s":[f]}],"border-w-e":[{"border-e":[f]}],"border-w-t":[{"border-t":[f]}],"border-w-r":[{"border-r":[f]}],"border-w-b":[{"border-b":[f]}],"border-w-l":[{"border-l":[f]}],"border-opacity":[{"border-opacity":[R]}],"border-style":[{border:[...A(),"hidden"]}],"divide-x":[{"divide-x":[f]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[f]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[R]}],"divide-style":[{divide:A()}],"border-color":[{border:[l]}],"border-color-x":[{"border-x":[l]}],"border-color-y":[{"border-y":[l]}],"border-color-s":[{"border-s":[l]}],"border-color-e":[{"border-e":[l]}],"border-color-t":[{"border-t":[l]}],"border-color-r":[{"border-r":[l]}],"border-color-b":[{"border-b":[l]}],"border-color-l":[{"border-l":[l]}],"divide-color":[{divide:[l]}],"outline-style":[{outline:["",...A()]}],"outline-offset":[{"outline-offset":[Et,X]}],"outline-w":[{outline:[Et,Lt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:a()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[R]}],"ring-offset-w":[{"ring-offset":[Et,Lt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ft,Ja]}],"shadow-color":[{shadow:[we]}],opacity:[{opacity:[R]}],"mix-blend":[{"mix-blend":[...T(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":T()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[i]}],contrast:[{contrast:[p]}],"drop-shadow":[{"drop-shadow":["","none",Ft,X]}],grayscale:[{grayscale:[v]}],"hue-rotate":[{"hue-rotate":[b]}],invert:[{invert:[x]}],saturate:[{saturate:[s]}],sepia:[{sepia:[m]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[p]}],"backdrop-grayscale":[{"backdrop-grayscale":[v]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[b]}],"backdrop-invert":[{"backdrop-invert":[x]}],"backdrop-opacity":[{"backdrop-opacity":[R]}],"backdrop-saturate":[{"backdrop-saturate":[s]}],"backdrop-sepia":[{"backdrop-sepia":[m]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[h]}],"border-spacing-x":[{"border-spacing-x":[h]}],"border-spacing-y":[{"border-spacing-y":[h]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",X]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",X]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",X]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[u]}],"scale-x":[{"scale-x":[u]}],"scale-y":[{"scale-y":[u]}],rotate:[{rotate:[be,X]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",X]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",X]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",X]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Et,Lt,pn]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ri=Na(to);var eo=jt("<label><!></label>");function no(t,e){const n=He(e,["children","$$slots","$$events","$$legacy"]),i=He(n,["color","defaultClass","show"]);Tt(e,!1);const l=mn();let r=Y(e,"color",12,"gray"),h=Y(e,"defaultClass",8,"text-sm rtl:text-right font-medium block"),f=Y(e,"show",8,!0),p=mn();const v={gray:"text-gray-900 dark:text-gray-300",green:"text-green-700 dark:text-green-500",red:"text-red-700 dark:text-red-500",disabled:"text-gray-400 dark:text-gray-500 grayscale contrast-50"};yn(()=>(V(p),Yt(r())),()=>{var c;const d=(c=V(p))==null?void 0:c.control;r(d!=null&&d.disabled?"disabled":r())}),yn(()=>(Yt(h()),Yt(r()),Yt(n)),()=>{it(l,Ri(h(),v[r()],n.class))}),Jr(),gi();var b=Ee(),x=Mt(b);{var w=d=>{var c=eo();let S;var R=Kt(c);nr(R,e,"default",{}),fi(c,o=>it(p,o),()=>V(p)),ae(()=>S=Vn(c,S,{...i,class:V(l)})),vt(d,c)},y=d=>{var c=Ee(),S=Mt(c);nr(S,e,"default",{}),vt(d,c)};Bn(x,d=>{f()?d(w):d(y,!1)})}vt(t,b),Dt()}var ro=jt("<input>");function io(t,e){const n=He(e,["children","$$slots","$$events","$$legacy"]),i=He(n,["value","size"]);Tt(e,!1);let l=Y(e,"value",12,0),r=Y(e,"size",8,"md");const h={sm:"h-1 range-sm",md:"h-2",lg:"h-3 range-lg"};let f=mn();yn(()=>(Yt(r()),Yt(n)),()=>{it(f,Ri("w-full bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",h[r()]??h.md,n.class))}),Jr(),gi();var p=ro();let v;ae(()=>v=Vn(p,v,{type:"range",...i,class:V(f)})),Js(p,l),ue("change",p,function(b){de.call(this,e,b)}),ue("click",p,function(b){de.call(this,e,b)}),ue("keydown",p,function(b){de.call(this,e,b)}),ue("keypress",p,function(b){de.call(this,e,b)}),ue("keyup",p,function(b){de.call(this,e,b)}),vt(t,p),Dt()}var so=jt('Zoom: <span class="font-semibold"> </span>%',1),ao=jt("<div><!> <!></div>");function oo(t,e){let i=Y(e,"class",8,""),l=Y(e,"value",12,100),r=Y(e,"min",8,0),h=Y(e,"max",8,100),f=Y(e,"step",8,1);var p=ao(),v=Kt(p);no(v,{defaultClass:"text-sm whitespace-nowrap cursor-pointer",title:"Reset zoom",onclick:()=>{l(100)},children:(x,w)=>{var y=so(),d=Se(Mt(y)),c=Kt(d);ae(()=>ci(c,l())),vt(x,y)},$$slots:{default:!0}});var b=Se(v,2);io(b,{get min(){return r()},get max(){return h()},get step(){return f()},id:"imageZoom",get value(){return l()},set value(x){l(x)},$$legacy:!0}),ae(()=>zs(p,i()+" flex items-center space-x-2")),vt(t,p)}const Tr=30;class lo{constructor(e,n){Qt(this,"boundingBoxCache");Qt(this,"pathLengthCache");Qt(this,"pathPointsCache",[]);Qt(this,"elementsToDrawCache");Qt(this,"calcTotalPathLength",()=>this.path.reduce((e,n)=>e+(n.type==="line"?n.length:Math.abs(n.radius*rt(n.angle))),0));this.startPoint=e,this.path=n,this.pathLengthCache=Math.trunc(this.calcTotalPathLength());for(let i=0;i<this.pathLengthCache;i++)this.pathPointsCache.push(this.calcPositionOnPath(i));this.boundingBoxCache=this.calculateBoundingBox(),this.elementsToDrawCache=this.getPathElementsToDraw()}get pathLength(){return this.pathLengthCache}getPathPoint(e){return this.pathPointsCache[Math.trunc(e%this.pathLengthCache)]}get box(){return{offsetX:-30+this.boundingBoxCache.minX,offsetY:-30+this.boundingBoxCache.minY,width:this.boundingBoxCache.maxX-this.boundingBoxCache.minX+2*Tr,height:this.boundingBoxCache.maxY-this.boundingBoxCache.minY+2*Tr}}get elementToDraw(){return this.elementsToDrawCache}calcPositionOnPath(e){let n=e%this.calcTotalPathLength(),i=this.startPoint.x,l=this.startPoint.y,r=this.startPoint.angle;for(;n>0;)for(const h of this.path)if(h.type==="line"){if(n<=h.length)return i+=n*Math.cos(rt(r)),l+=n*Math.sin(rt(r)),{x:i,y:l,angle:r};i+=h.length*Math.cos(rt(r)),l+=h.length*Math.sin(rt(r)),n-=h.length}else if(h.type==="arc"){const f=Math.abs(h.radius*rt(h.angle)),p=h.angle<0,v=n/h.radius,b=Ca(v),x=i-h.radius*Math.sin(rt(r))*(p?-1:1),w=l+h.radius*Math.cos(rt(r))*(p?-1:1);if(n<=f)return r+=b*Math.sign(h.angle),i=x+h.radius*Math.cos(rt(r-90*(p?-1:1))),l=w+h.radius*Math.sin(rt(r-90*(p?-1:1))),{x:i,y:l,angle:r};r+=h.angle,i=x+h.radius*Math.cos(rt(r-90*(p?-1:1))),l=w+h.radius*Math.sin(rt(r-90*(p?-1:1))),n-=f}return{x:i,y:l,angle:r}}calculateBoundingBox(){let e=this.startPoint.x,n=this.startPoint.y,i=this.startPoint.x,l=this.startPoint.y;for(let r=0;r<this.pathLengthCache;r++){const h=this.calcPositionOnPath(r);e=Math.trunc(Math.min(e,h.x)),n=Math.trunc(Math.min(n,h.y)),i=Math.trunc(Math.max(i,h.x)),l=Math.trunc(Math.max(l,h.y))}return{minX:e,minY:n,maxX:i,maxY:l}}getPathElementsToDraw(){const e=[];e.push({type:"move",x:this.startPoint.x,y:this.startPoint.y});let n=this.startPoint.x,i=this.startPoint.y,l=this.startPoint.angle;for(const r of this.path)if(r.type==="line"){const h=n+r.length*Math.cos(rt(l)),f=i+r.length*Math.sin(rt(l));e.push({type:"line",x:h,y:f}),n=h,i=f}else if(r.type==="arc"){const h=r.angle<0,f=n-r.radius*Math.sin(rt(l))*(h?-1:1),p=i+r.radius*Math.cos(rt(l))*(h?-1:1),v=rt(l-90*(h?-1:1)),b=rt(l-90*(h?-1:1)+r.angle);e.push({type:"arc",cx:f,cy:p,radius:r.radius,startAngleRad:v,endAngleRad:b,anticlockwise:h}),n=f+r.radius*Math.cos(b),i=p+r.radius*Math.sin(b),l+=r.angle}return e}}const _n={route:new lo({x:0,y:0,angle:0},[{type:"line",length:100},{type:"arc",radius:50,angle:90},{type:"line",length:100},{type:"arc",radius:50,angle:-90},{type:"line",length:100},{type:"arc",radius:50,angle:180},{type:"line",length:300},{type:"arc",radius:50,angle:45},{type:"line",length:100},{type:"arc",radius:50,angle:45},{type:"line",length:129},{type:"arc",radius:50,angle:90},{type:"line",length:71}])};var co=jt("<!> <!>",1),ho=jt('<div class="flex justify-center my-4"><!></div> <div class="flex justify-center my-4"> </div> <div class="flex justify-center"><!></div>',1);function uo(t,e){Tt(e,!0);const n=2,i=_n.route.box,l=_n.route.pathLength;let r=Ie(100);var h=ho(),f=Mt(h),p=Kt(f);oo(p,{class:"w-2/5",min:10,max:300,step:10,get value(){return V(r)},set value(s){it(r,Nt(s))}});var v=Se(f,2),b=Kt(v),x=Se(v,2),w=Kt(x);const y=ot(()=>n*i.width*(V(r)/100)),d=ot(()=>n*i.height*(V(r)/100)),c=ot(()=>V(r)/100),S=ot(()=>V(r)/100),R=ot(()=>n*i.offsetX),o=ot(()=>n*i.offsetY);wa(w,{get width(){return V(y)},get height(){return V(d)},get scaleX(){return V(c)},get scaleY(){return V(S)},get offsetX(){return V(R)},get offsetY(){return V(o)},children:(s,u)=>{ga(s,{children:(m,k)=>{var D=co(),C=Mt(D);const G=ot(()=>n*i.offsetX),E=ot(()=>n*i.offsetY),O=ot(()=>n*i.width),N=ot(()=>n*i.height);va(C,{id:"background",get x(){return V(G)},get y(){return V(E)},get width(){return V(O)},get height(){return V(N)},fill:"#7a7",stroke:"#888"});var a=Se(C,2);Sa(a,{get route(){return _n.route},pixelPerMeter:n,showPath:!0}),vt(m,D)},$$slots:{default:!0}})},$$slots:{default:!0}}),ae(()=>ci(b,`${l??""} m in ${i.width??""} x ${i.height??""} m`)),vt(t,h),Dt()}Vs(uo,{target:document.querySelector("#app")});
